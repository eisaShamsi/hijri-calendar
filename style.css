/* ═══════════════════════════════════════════════════════════
   التقويم الهجري — التوفيقات الإلهامية
   ═══════════════════════════════════════════════════════════ */

/* Amiri — Arabic */
@font-face {
    font-family: 'Amiri';
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url('fonts/amiri-400-arabic.woff2') format('woff2');
    unicode-range: U+0600-06FF, U+0750-077F, U+FB50-FDFF, U+FE70-FEFC;
}
@font-face {
    font-family: 'Amiri';
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url('fonts/amiri-400-latin.woff2') format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+20AC, U+2122, U+FEFF, U+FFFD;
}
@font-face {
    font-family: 'Amiri';
    font-style: normal;
    font-weight: 700;
    font-display: swap;
    src: url('fonts/amiri-700-arabic.woff2') format('woff2');
    unicode-range: U+0600-06FF, U+0750-077F, U+FB50-FDFF, U+FE70-FEFC;
}
@font-face {
    font-family: 'Amiri';
    font-style: normal;
    font-weight: 700;
    font-display: swap;
    src: url('fonts/amiri-700-latin.woff2') format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+20AC, U+2122, U+FEFF, U+FFFD;
}
/* Cairo — Variable font (300-700) */
@font-face {
    font-family: 'Cairo';
    font-style: normal;
    font-weight: 300 700;
    font-display: swap;
    src: url('fonts/cairo-arabic.woff2') format('woff2');
    unicode-range: U+0600-06FF, U+0750-077F, U+FB50-FDFF, U+FE70-FEFC;
}
@font-face {
    font-family: 'Cairo';
    font-style: normal;
    font-weight: 300 700;
    font-display: swap;
    src: url('fonts/cairo-latin.woff2') format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+20AC, U+2122, U+FEFF, U+FFFD;
}

/* ─── المتغيرات ──────────────────────────────────────────── */
:root {
    --green-900: #0d3b2e;
    --green-800: #14553f;
    --green-700: #1a6b4f;
    --green-600: #1f8060;
    --green-500: #27a678;
    --green-400: #4cc494;
    --green-100: #d4f0e3;
    --green-50:  #eef9f3;

    --gold-600: #b8860b;
    --gold-500: #d4a017;
    --gold-400: #e6b830;
    --gold-300: #f0cd5e;
    --gold-200: #f5dfa0;
    --gold-100: #fdf3d7;

    --cream:     #fefcf5;
    --white:     #ffffff;
    --gray-50:   #f9fafb;
    --gray-100:  #f3f4f6;
    --gray-200:  #e5e7eb;
    --gray-300:  #d1d5db;
    --gray-400:  #9ca3af;
    --gray-500:  #6b7280;
    --gray-600:  #4b5563;
    --gray-700:  #374151;
    --gray-800:  #1f2937;
    --gray-900:  #111827;

    --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
    --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
    --shadow-lg: 0 10px 30px rgba(0,0,0,0.1);

    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 16px;
    --radius-xl: 24px;

    --font-arabic: 'Calibri', 'Cairo', 'Segoe UI', Tahoma, sans-serif;
    --font-display: 'Calibri', 'Cairo', sans-serif;

    /* ─── ألوان البردي (الوضع الفاتح) ─── */
    --papyrus-bg: #f5e6c8;
    --papyrus-light: #faf0d8;
    --papyrus-dark: #e0c9a0;
    --papyrus-text: #3d2517;
    --papyrus-text-secondary: #6b4c35;
    --papyrus-border: rgba(139,90,43,0.25);
    --papyrus-card: rgba(255,248,230,0.7);
    --papyrus-section: rgba(245,230,200,0.5);

    /* ─── متغيرات النسيج والأزرار (مجردة) ─── */
    --tex-spot-r: 160; --tex-spot-g: 120; --tex-spot-b: 60;
    --tex-fiber: rgba(139,90,43,0.04);
    --tex-fiber-v: rgba(139,90,43,0.02);
    --tex-grad-top: #f5e6c8;
    --tex-grad-mid1: #ecdbb4;
    --tex-grad-mid2: #e8d5a8;
    --tex-grad-bottom: #dfc99e;
    --btn-grad-from: #8b5a2b;
    --btn-grad-to: #6b4c35;
    --btn-text: #fdf3d7;
    --header-from: #5a3a1e;
    --header-to: #7a5a3a;
    --arc-label: #8b5a2b;
}

/* ─── الوضع الداكن ────────────────────────────────────────── */
[data-theme="dark"] {
    --green-900: #a7f3d0;
    --green-800: #6ee7b7;
    --green-700: #34d399;
    --green-600: #10b981;
    --green-500: #059669;
    --green-400: #047857;
    --green-100: #064e3b;
    --green-50:  #022c22;

    --gold-600: #fbbf24;
    --gold-500: #f59e0b;
    --gold-400: #d97706;
    --gold-300: #b45309;
    --gold-200: #92400e;
    --gold-100: #78350f;

    --cream:     #14100a;
    --white:     #1e180e;
    --gray-50:   #1e180e;
    --gray-100:  #2d2418;
    --gray-200:  #3d3020;
    --gray-300:  #6b5a44;
    --gray-400:  #9a8a70;
    --gray-500:  #c4b498;
    --gray-600:  #ddd0b8;
    --gray-700:  #efe6d4;
    --gray-800:  #f5edd8;
    --gray-900:  #faf4e6;

    --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
    --shadow-md: 0 4px 12px rgba(0,0,0,0.4);
    --shadow-lg: 0 10px 30px rgba(0,0,0,0.5);

    /* ─── متغيرات النسيج والأزرار (داكن) ─── */
    --tex-spot-r: 100; --tex-spot-g: 70; --tex-spot-b: 30;
    --tex-fiber: rgba(139,90,43,0.05);
    --tex-fiber-v: rgba(139,90,43,0.03);
    --tex-grad-top: #1a1408;
    --tex-grad-mid1: #1e180e;
    --tex-grad-mid2: #211a10;
    --tex-grad-bottom: #1a1408;
    --btn-grad-from: #5a3a1e;
    --btn-grad-to: #4a2c14;
    --btn-text: #f5edd8;
    --header-from: #2a1a08;
    --header-to: #3d2517;
    --arc-label: #f4a940;
}

[data-theme="dark"] .calendar-cell.today {
    background: linear-gradient(135deg, #059669, #10b981);
}

[data-theme="dark"] .calendar-cell.today:hover {
    background: linear-gradient(135deg, #047857, #059669);
}

[data-theme="dark"] .calendar-cell .greg-day {
    color: #67e8f9;
}

[data-theme="dark"] .calendar-cell.other-month .greg-day {
    color: var(--gray-300);
}

[data-theme="dark"] .nav-bar {
    background: linear-gradient(135deg, #064e3b, #047857);
}

[data-theme="dark"] .prayer-header {
    background: linear-gradient(135deg, #064e3b, #047857);
}

[data-theme="dark"] .convert-btn {
    background: linear-gradient(135deg, #047857, #059669);
}

[data-theme="dark"] .today-card .date-icon {
    background: linear-gradient(135deg, #047857, #059669);
}

[data-theme="dark"] .calendar-cell.weekend-col {
    background: rgba(16, 185, 129, 0.08);
}

[data-theme="dark"] .mode-select {
    background: #334155;
    border-color: #475569;
    color: #f1f5f9;
}

[data-theme="dark"] .input-group input {
    background: #334155;
    border-color: #475569;
    color: #f1f5f9;
}

[data-theme="dark"] .header-icon,
[data-theme="dark"] .header h1 {
    color: #c0c0c0;
}

/* ─── زر الوضع الداكن ──────────────────────────────────────── */
.theme-toggle-group {
    display: flex;
    align-items: center;
    gap: 8px;
}

.theme-toggle-btn {
    background: var(--gray-100);
    border: 1px solid var(--gray-200);
    color: var(--gray-700);
    width: 36px;
    height: 36px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 1.1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.theme-toggle-btn:hover {
    background: var(--green-50);
    border-color: var(--green-400);
    color: var(--green-700);
}

/* ─── الأساس ─────────────────────────────────────────────── */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: clamp(14px, 3.6vw, 16px);
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-arabic);
    background: var(--cream);
    color: var(--papyrus-text);
    direction: rtl;
    min-height: 100vh;
    line-height: 1.6;
}
[data-theme="dark"] body {
    color: var(--gray-800);
}

/* ─── زخرفة الخلفية ──────────────────────────────────────── */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 320px;
    background: linear-gradient(135deg, var(--header-from) 0%, var(--header-to) 100%);
    z-index: -1;
}
[data-theme="dark"] body::before {
    background: linear-gradient(135deg, #2a1a08 0%, #3d2517 100%);
}

/* ─── الحاوية الرئيسية ───────────────────────────────────── */
.container {
    max-width: 800px;
    margin: 0 auto;
    padding: 24px 16px 48px;
}

/* ─── الرأس ──────────────────────────────────────────────── */
.header {
    text-align: center;
    padding: calc(32px + env(safe-area-inset-top, 0px)) 16px 40px;
    color: var(--white);
}

.header-icon {
    font-size: 2.5rem;
    margin-bottom: 8px;
    display: block;
}

.header h1 {
    font-family: var(--font-display);
    font-size: 2.2rem;
    font-weight: 700;
    margin-bottom: 0;
    text-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* ─── بطاقة اليوم ────────────────────────────────────────── */
.today-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    padding: 20px 24px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 16px;
    border-right: 4px solid var(--gold-500);
}

.today-card .date-icon {
    width: 52px;
    height: 52px;
    background: linear-gradient(135deg, var(--green-700), var(--green-500));
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--white);
    font-size: 1.4rem;
    flex-shrink: 0;
}

.today-card .date-text {
    flex: 1;
}

.today-card .date-text .hijri-date {
    font-family: var(--font-display);
    font-size: 1.15rem;
    font-weight: 700;
    color: var(--green-800);
    margin-bottom: 2px;
}

.today-card .date-text .greg-date {
    font-size: 0.85rem;
    color: var(--gray-500);
}

/* ─── بطاقة مواقيت الصلاة ────────────────────────────────── */
.prayer-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    margin-bottom: 20px;
    overflow: hidden;
    border-right: 4px solid var(--green-500);
}

html[dir="ltr"] .prayer-card {
    border-right: none;
    border-left: 4px solid var(--green-500);
}

.prayer-header {
    background: linear-gradient(135deg, var(--green-800), var(--green-600));
    padding: 14px 20px;
    color: var(--white);
    font-family: var(--font-display);
    font-size: 1.05rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 10px;
}

.prayer-icon {
    font-size: 1.3rem;
}

.prayer-no-location {
    padding: 24px 20px;
    text-align: center;
    color: var(--gray-500);
    font-size: 0.88rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}

.prayer-detect-btn {
    font-size: 0.78rem;
    padding: 7px 18px;
}

.prayer-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 1px;
    background: var(--gray-100);
    padding: 1px;
}

.prayer-item {
    background: var(--white);
    padding: 10px 6px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.prayer-item.prayer-next {
    background: var(--green-50);
}

.prayer-name {
    font-size: 0.72rem;
    font-weight: 600;
    color: var(--gray-600);
}

.prayer-item.prayer-next .prayer-name {
    color: var(--green-700);
}

.prayer-time {
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 700;
    color: var(--green-800);
    direction: ltr;
}

.prayer-item.prayer-next .prayer-time {
    color: var(--green-600);
}

.prayer-date-indicator {
    padding: 8px 16px;
    background: var(--gold-100);
    border-top: 1px solid var(--gold-200);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-size: 0.78rem;
    color: var(--gold-600);
    font-weight: 600;
}

.prayer-date-text {
    font-family: var(--font-display);
}

.prayer-date-reset {
    background: none;
    border: 1px solid var(--gold-300);
    color: var(--gold-500);
    border-radius: 50%;
    width: 22px;
    height: 22px;
    font-size: 0.7rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    flex-shrink: 0;
}

.prayer-date-reset:hover {
    background: var(--gold-200);
    color: var(--gold-600);
}

.prayer-countdown {
    padding: 10px 20px;
    background: var(--green-50);
    border-top: 1px solid var(--green-100);
    text-align: center;
    font-size: 0.82rem;
    color: var(--green-700);
}

.prayer-countdown strong {
    color: var(--green-800);
}

.prayer-method-info {
    padding: 6px 20px;
    text-align: center;
    font-size: 0.72rem;
    color: var(--gray-400);
    border-top: 1px solid var(--gray-100);
}

.prayer-settings-toggle {
    padding: 0 20px 10px;
    text-align: center;
}

.prayer-settings-btn {
    background: transparent;
    border: none;
    color: var(--gray-400);
    cursor: pointer;
    font-family: var(--font-arabic);
    font-size: 0.72rem;
    padding: 6px 12px;
    transition: color 0.2s;
}

.prayer-settings-btn:hover {
    color: var(--green-600);
}

.prayer-settings {
    padding: 14px 20px;
    border-top: 1px solid var(--gray-100);
}

.prayer-settings-row {
    display: flex;
    gap: 12px;
    align-items: flex-end;
    flex-wrap: wrap;
    margin-bottom: 10px;
}

.prayer-settings-row:last-child {
    margin-bottom: 0;
}

.prayer-settings-row .tool-group {
    min-width: 140px;
}

.prayer-settings-row .input-group {
    min-width: 80px;
    flex: 1;
}

/* ─── بطاقة التقويم ──────────────────────────────────────── */
.calendar-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    overflow: hidden;
    margin-bottom: 20px;
}

/* ─── شريط التنقل ────────────────────────────────────────── */
.nav-bar {
    background: linear-gradient(135deg, var(--green-800), var(--green-700));
    padding: 16px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
}

.nav-bar .nav-btn {
    background: rgba(255,255,255,0.12);
    border: 1px solid rgba(255,255,255,0.2);
    color: var(--white);
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    transition: all 0.2s;
    position: relative;
}

.nav-bar .nav-btn::after {
    content: '';
    display: block;
    width: 10px;
    height: 10px;
    border-top: 2.5px solid var(--white);
    border-right: 2.5px solid var(--white);
}

/* next shows < (left arrow); prev shows > (right arrow) */
.nav-bar .nav-next::after {
    transform: rotate(-135deg);
    margin-right: -3px;
}

.nav-bar .nav-prev::after {
    transform: rotate(45deg);
    margin-left: -3px;
}

/* RTL: اليوم far right, then prev (>), month, next (<) on left */
.nav-bar .today-nav-btn {
    order: 0;
}

.nav-bar .nav-prev {
    order: 1;
}

.nav-bar .month-info {
    order: 2;
}

.nav-bar .nav-next {
    order: 3;
}

/* LTR: prev (<) on left, next (>) on right — flip arrows too */
html[dir="ltr"] .nav-bar .today-nav-btn {
    order: 0;
}

html[dir="ltr"] .nav-bar .nav-prev {
    order: 1;
}

html[dir="ltr"] .nav-bar .month-info {
    order: 2;
}

html[dir="ltr"] .nav-bar .nav-next {
    order: 3;
}

html[dir="ltr"] .nav-bar .nav-next::after {
    transform: rotate(45deg);
    margin-right: 0;
    margin-left: -3px;
}

html[dir="ltr"] .nav-bar .nav-prev::after {
    transform: rotate(-135deg);
    margin-left: 0;
    margin-right: -3px;
}

.nav-bar .nav-btn:hover {
    background: rgba(255,255,255,0.25);
    transform: scale(1.05);
}

.nav-bar .month-info {
    text-align: center;
    flex: 1;
}

.nav-bar .month-title {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--white);
}

/* ══ لوح الشهر الحرام — المخطوطة المذهّبة ══ */

/* ── لوح التاريخ الهجري في عرض اليوم ── */
.dv-hijri.sacred-month {
    position: relative;
    background: linear-gradient(to bottom, #f5e6c8, #eedbb5, #f5e6c8);
    border: 1.5px solid #c49440;
    border-radius: 8px;
    padding: 22px 16px 14px;
    box-shadow: inset 0 0 20px rgba(180,130,50,0.08), 0 2px 8px rgba(0,0,0,0.1);
}
.dv-hijri.sacred-month::before {
    content: '✦ ' attr(data-sacred-label) ' ✦';
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    background: #f5e6c8;
    color: #c49440;
    font-size: 0.7rem;
    font-weight: 700;
    padding: 0 8px;
    white-space: nowrap;
    letter-spacing: 1px;
    unicode-bidi: plaintext;
}
.dv-hijri.sacred-month::after {
    content: '';
    position: absolute;
    bottom: 6px;
    left: 15%;
    right: 15%;
    height: 1.5px;
    background: linear-gradient(to right, transparent, #c49440, transparent);
}
.dv-hijri.sacred-month .dv-date-num { color: #6b4400; }
.dv-hijri.sacred-month .dv-date-month { color: #8b5e1a; }
.dv-hijri.sacred-month .dv-date-year { color: #8b5e1a; }

[data-theme="dark"] .dv-hijri.sacred-month {
    background: linear-gradient(to bottom, #2a1a08, #1f150a, #2a1a08);
    border-color: #8b6914;
    box-shadow: inset 0 0 20px rgba(100,70,20,0.15), 0 2px 8px rgba(0,0,0,0.3);
}
[data-theme="dark"] .dv-hijri.sacred-month::before {
    background: #2a1a08;
    color: #c49440;
}
[data-theme="dark"] .dv-hijri.sacred-month::after {
    background: linear-gradient(to right, transparent, #8b6914, transparent);
}
[data-theme="dark"] .dv-hijri.sacred-month .dv-date-num { color: #e8c170; }
[data-theme="dark"] .dv-hijri.sacred-month .dv-date-month { color: #d4a64e; }
[data-theme="dark"] .dv-hijri.sacred-month .dv-date-year { color: #d4a64e; }

/* ── شريط التنقل — لوح مذهّب ── */
.nav-bar.sacred-month .month-title {
    position: relative;
    background: linear-gradient(to bottom, #f5e6c8, #eedbb5);
    border: 1.5px solid #c49440;
    border-radius: 8px;
    padding: 6px 16px 4px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.15);
}
.nav-bar.sacred-month .month-title,
.nav-bar.sacred-month .month-title .sacred-month-badge {
    color: #6b4400;
}
.sacred-month-badge {
    font-size: 0.65em;
    font-weight: 400;
    margin-inline-start: 4px;
}
[data-theme="dark"] .nav-bar.sacred-month .month-title {
    background: linear-gradient(to bottom, #2a1a08, #1f150a);
    border-color: #8b6914;
}
[data-theme="dark"] .nav-bar.sacred-month .month-title,
[data-theme="dark"] .nav-bar.sacred-month .month-title .sacred-month-badge {
    color: #e8c170;
}

/* ── بطاقة اليوم ── */
.today-card.sacred-month {
    border: 1.5px solid rgba(196,148,64,0.4);
}
.today-card .sacred-month-badge {
    color: #c49440;
    font-size: 0.75em;
}
[data-theme="dark"] .today-card.sacred-month {
    border-color: rgba(232,193,112,0.3);
}
[data-theme="dark"] .today-card .sacred-month-badge {
    color: #d4a64e;
}

.nav-bar .gregorian-range {
    font-size: 0.8rem;
    color: rgba(255,255,255,0.7);
    margin-top: 2px;
}

.leap-badge {
    display: none;
    background: var(--gold-500);
    color: var(--green-900);
    font-size: 0.65rem;
    font-weight: 700;
    padding: 2px 8px;
    border-radius: var(--radius-xl);
    margin-right: 8px;
    vertical-align: middle;
}

.today-nav-btn {
    background: rgba(255,255,255,0.12);
    border: 1px solid rgba(255,255,255,0.2);
    color: var(--white);
    padding: 6px 14px;
    border-radius: var(--radius-xl);
    cursor: pointer;
    font-family: var(--font-arabic);
    font-size: 0.78rem;
    transition: all 0.2s;
}

.today-nav-btn:hover {
    background: rgba(255,255,255,0.25);
}

/* ─── رؤوس الأيام ───────────────────────────────────────── */
.day-headers {
    display: grid;
    grid-template-columns: 42px repeat(7, 1fr);
    background: var(--green-50);
    border-bottom: 1px solid var(--green-100);
}

.day-header {
    padding: 10px 4px;
    text-align: center;
    font-size: 0.78rem;
    font-weight: 600;
    color: var(--green-700);
}

.day-header.week-header {
    font-size: 0.65rem;
    color: var(--gray-400);
    font-weight: 600;
}

.day-header.day-header-weekend {
    color: var(--green-600);
    background: rgba(39, 166, 120, 0.08);
}

/* ─── شبكة التقويم ───────────────────────────────────────── */
.calendar-grid {
    display: grid;
    grid-template-columns: 42px repeat(7, 1fr);
    gap: 1px;
    background: var(--gray-100);
    padding: 1px;
}

/* ─── خلية رقم الأسبوع ─────────────────────────────────── */
.week-number {
    background: var(--gray-50);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--gray-400);
    min-height: 62px;
    font-family: var(--font-display);
}

.calendar-cell {
    background: var(--white);
    padding: 8px 6px;
    min-height: 62px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 3px;
    cursor: pointer;
    transition: all 0.15s;
    position: relative;
}

.calendar-cell:hover {
    background: var(--green-50);
    z-index: 1;
}

.calendar-cell .hijri-day {
    font-family: var(--font-display);
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--green-900);
    line-height: 1;
}

.calendar-cell .greg-day {
    font-size: 0.68rem;
    color: #0e7490;
    line-height: 1;
}

/* نهاية الأسبوع (الجمعة والسبت) */
.calendar-cell.weekend-col {
    background: rgba(39, 166, 120, 0.04);
}


/* شهر آخر */
.calendar-cell.other-month {
    background: var(--gray-50);
}

.calendar-cell.other-month .hijri-day {
    color: var(--gray-300);
}

.calendar-cell.other-month .greg-day {
    color: var(--gray-300);
}

/* اليوم الحالي */
.calendar-cell.today {
    background: linear-gradient(135deg, var(--green-600), var(--green-500));
    border-radius: var(--radius-sm);
}

.calendar-cell.today .hijri-day {
    color: var(--white);
    font-size: 1.3rem;
}

.calendar-cell.today .greg-day {
    color: rgba(200,240,255,0.8);
}

.calendar-cell.today:hover {
    background: linear-gradient(135deg, var(--green-700), var(--green-600));
}

/* يوم محدد */
.calendar-cell.selected {
    outline: 2px solid var(--gold-500);
    outline-offset: -2px;
    border-radius: var(--radius-sm);
}

/* ─── شريط المعلومات ─────────────────────────────────────── */
.info-bar {
    padding: 12px 20px;
    background: var(--cream);
    border-top: 1px solid var(--gray-200);
    text-align: center;
    font-size: 0.85rem;
    color: var(--gray-600);
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* ─── شارة النمط ─────────────────────────────────────────── */
.mode-badge {
    font-size: 0.68rem;
    font-weight: 700;
    padding: 3px 10px;
    border-radius: var(--radius-xl);
    flex-shrink: 0;
}

.mode-badge.mode-astro {
    background: var(--green-100);
    color: var(--green-700);
}

.mode-badge.mode-tab {
    background: var(--gold-100);
    color: var(--gold-600);
}

/* ─── شريط الأدوات ───────────────────────────────────────── */
.toolbar-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    padding: 14px 20px;
    margin-bottom: 20px;
}

.toolbar-row {
    display: flex;
    gap: 16px;
    align-items: flex-start;
    flex-wrap: wrap;
}

.tool-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
    flex: 1;
    min-width: 180px;
}

.tool-label {
    font-size: 0.72rem;
    font-weight: 600;
    color: var(--gray-500);
}

.mode-select {
    font-family: var(--font-arabic);
    font-size: 0.82rem;
    padding: 7px 12px;
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-sm);
    background: var(--gray-50);
    color: var(--gray-800);
    cursor: pointer;
    transition: border-color 0.2s;
    direction: rtl;
}

.mode-select:focus {
    outline: none;
    border-color: var(--green-500);
}

/* ─── أدوات التصحيح ──────────────────────────────────────── */
.corr-controls {
    display: flex;
    align-items: center;
    gap: 6px;
}

.corr-btn {
    background: var(--gray-100);
    border: 1px solid var(--gray-200);
    color: var(--gray-700);
    width: 32px;
    height: 32px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 1rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
    font-family: var(--font-arabic);
}

.corr-btn:hover {
    background: var(--green-50);
    border-color: var(--green-400);
    color: var(--green-700);
}

.corr-reset-btn,
.corr-clear-btn {
    width: auto;
    padding: 0 10px;
    font-size: 0.7rem;
    font-weight: 600;
}

.corr-clear-btn {
    background: transparent;
    border-color: transparent;
    color: var(--gray-400);
    font-size: 0.68rem;
}

.corr-clear-btn:hover {
    color: #dc2626;
    background: #fef2f2;
    border-color: #fecaca;
}

.corr-value {
    min-width: 32px;
    text-align: center;
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 700;
    color: var(--gray-400);
}

.corr-value.corr-active {
    color: var(--gold-600);
}

/* ─── قائمة التصحيحات ────────────────────────────────────── */
.corrections-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid var(--gray-100);
    flex-wrap: wrap;
}

.corrections-label {
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--gray-500);
    flex-shrink: 0;
}

.corr-tag {
    display: inline-block;
    background: var(--gold-100);
    color: var(--gold-600);
    font-size: 0.68rem;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: var(--radius-xl);
    margin: 1px;
}

.corr-empty {
    font-size: 0.7rem;
    color: var(--gray-400);
}

/* ─── بطاقة الانتقال إلى تاريخ ─────────────────────────── */
.goto-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    overflow: hidden;
    margin-bottom: 20px;
}

.goto-header {
    background: var(--green-50);
    padding: 12px 20px;
    border-bottom: 1px solid var(--green-100);
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 700;
    color: var(--green-800);
}

.goto-body {
    padding: 14px 20px;
}

.goto-toggle {
    display: flex;
    gap: 16px;
    margin-bottom: 12px;
}

.goto-radio {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--gray-700);
    cursor: pointer;
}

.goto-radio input[type="radio"] {
    accent-color: var(--green-600);
}

/* ─── تصدير iCal ─────────────────────────────────────────── */
.export-row {
    display: flex;
    gap: 16px;
    align-items: flex-end;
    flex-wrap: wrap;
}

.export-range {
    flex: 1;
    min-width: 160px;
}

.export-label {
    display: block;
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--green-700);
    margin-bottom: 6px;
}

.export-fields {
    display: flex;
    gap: 8px;
}

.export-btn {
    align-self: flex-end;
    margin-bottom: 0;
    white-space: nowrap;
}

.input-row {
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
}

.input-group {
    display: flex;
    flex-direction: column;
    gap: 3px;
    flex: 1;
    min-width: 70px;
}

.input-group label {
    font-size: 0.7rem;
    color: var(--gray-500);
}

.input-group input {
    font-family: var(--font-arabic);
    font-size: 0.9rem;
    padding: 8px 10px;
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-sm);
    text-align: center;
    color: var(--gray-800);
    background: var(--gray-50);
    transition: border-color 0.2s;
    width: 100%;
    direction: ltr;
}

.input-group input:focus {
    outline: none;
    border-color: var(--green-500);
    background: var(--white);
}

.convert-btn {
    background: linear-gradient(135deg, var(--green-700), var(--green-500));
    color: var(--white);
    border: none;
    padding: 8px 20px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-family: var(--font-arabic);
    font-size: 0.82rem;
    font-weight: 600;
    transition: all 0.2s;
    white-space: nowrap;
    align-self: flex-end;
    margin-top: 3px;
}

.convert-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(26, 107, 79, 0.3);
}

.conversion-result {
    margin-top: 10px;
    padding: 10px 14px;
    background: var(--gold-100);
    border-radius: var(--radius-sm);
    font-size: 0.88rem;
    color: var(--gray-700);
    min-height: 40px;
    display: flex;
    align-items: center;
}

.conversion-result:empty {
    display: none;
}

.result-label {
    font-weight: 700;
    color: var(--green-700);
    margin-left: 6px;
}

/* ─── بطاقة المعلومات ────────────────────────────────────── */
.about-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    padding: 20px 24px;
    border-right: 3px solid var(--gold-500);
}

.about-card h3 {
    font-family: var(--font-display);
    font-size: 1rem;
    color: var(--green-800);
    margin-bottom: 8px;
}

.about-card p {
    font-size: 0.82rem;
    color: var(--gray-600);
    line-height: 1.8;
    margin-bottom: 8px;
}

.about-card .formula {
    display: inline-block;
    background: var(--gray-100);
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    font-family: 'Courier New', monospace;
    font-size: 0.78rem;
    color: var(--green-700);
    direction: ltr;
}

/* ─── التذييل ────────────────────────────────────────────── */
.site-footer {
    text-align: center;
    padding: 24px 16px calc(16px + env(safe-area-inset-bottom, 0px));
    margin-top: 12px;
    font-size: 0.82rem;
    color: var(--gray-500);
    font-weight: 600;
    line-height: 1.8;
}

.footer-version {
    font-size: 0.72rem;
    font-weight: 400;
    color: var(--gray-400);
}

.footer-tool {
    font-size: 0.68rem;
    font-weight: 400;
    color: var(--gray-400);
}

/* ─── دعم LTR (الإنجليزية) ────────────────────────────────── */
html[dir="ltr"] body {
    direction: ltr;
}

html[dir="ltr"] .today-card {
    border-right: none;
    border-left: 4px solid var(--gold-500);
}

html[dir="ltr"] .about-card {
    border-right: none;
    border-left: 3px solid var(--gold-500);
}

html[dir="ltr"] .mode-select {
    direction: ltr;
}

html[dir="ltr"] .leap-badge {
    margin-right: 0;
    margin-left: 8px;
}

html[dir="ltr"] .result-label {
    margin-left: 0;
    margin-right: 6px;
}

/* ─── نقاط المناسبات الإسلامية ────────────────────────────── */
.event-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    position: absolute;
    bottom: 3px;
    left: 50%;
    transform: translateX(-50%);
}

.event-holiday { background: #ef4444; }
.event-observance { background: var(--gold-500); }
.event-special { background: #8b5cf6; }

.calendar-cell.today .event-dot {
    bottom: 2px;
}

.info-event {
    display: inline-block;
    font-size: 0.78rem;
    font-weight: 700;
    padding: 1px 8px;
    border-radius: var(--radius-xl);
    margin-right: 4px;
}

.info-event-holiday { color: #ef4444; }
.info-event-observance { color: var(--gold-600); }
.info-event-special { color: #8b5cf6; }

/* ─── الجدول الشهري ──────────────────────────────────────── */
.prayer-timetable-toggle {
    padding: 0 20px 10px;
    text-align: center;
}

.timetable-container {
    padding: 0 10px 14px;
    overflow-x: auto;
}

.timetable-header {
    display: flex;
    justify-content: flex-end;
    padding: 4px 10px 8px;
}

.timetable-csv-btn {
    font-size: 0.72rem;
    padding: 4px 12px;
}

.timetable {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.75rem;
    text-align: center;
}

.timetable th {
    background: var(--green-50);
    color: var(--green-700);
    padding: 6px 4px;
    font-weight: 700;
    border: 1px solid var(--gray-200);
    white-space: nowrap;
}

.timetable td {
    padding: 5px 4px;
    border: 1px solid var(--gray-100);
    white-space: nowrap;
    font-family: var(--font-display);
}

.timetable td.tt-time {
    direction: ltr;
    unicode-bidi: embed;
}

.timetable tr.timetable-today {
    background: var(--green-50);
    font-weight: 700;
}

.timetable tr.timetable-today td {
    color: var(--green-700);
}

/* ─── الإشعارات ──────────────────────────────────────────── */
.notify-row {
    border-top: 1px solid var(--gray-100);
    padding-top: 10px;
    margin-top: 4px;
}

.notify-row .tool-label {
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
}

.notify-row input[type="checkbox"] {
    accent-color: var(--green-600);
    width: 16px;
    height: 16px;
}

.notify-status {
    font-size: 0.68rem;
    padding: 2px 8px;
    border-radius: var(--radius-xl);
}

.notify-granted { background: var(--green-100); color: var(--green-700); }
.notify-denied { background: #fef2f2; color: #dc2626; }
.notify-default { background: var(--gray-100); color: var(--gray-500); }

/* ─── سطر الأنواء في بطاقة اليوم ─────────────────────────── */
.today-card .date-text .anwa-date {
    font-size: 0.75rem;
    color: var(--gold-600);
    margin-top: 4px;
    line-height: 1.4;
}

/* ─── بطاقة الأنواء والمواسم ─────────────────────────────── */
.anwa-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    margin-bottom: 20px;
    overflow: hidden;
    border-right: 4px solid var(--gold-500);
}

html[dir="ltr"] .anwa-card {
    border-right: none;
    border-left: 4px solid var(--gold-500);
}

.anwa-header {
    background: linear-gradient(135deg, #b8860b, #d4a017, #e6b830);
    padding: 14px 20px;
    color: var(--white);
    font-family: var(--font-display);
    font-size: 1.05rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 10px;
}

[data-theme="dark"] .anwa-header {
    background: linear-gradient(135deg, #92400e, #b45309, #d97706);
}

.anwa-icon {
    font-size: 1.3rem;
}

.anwa-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1px;
    background: var(--gray-100);
    padding: 1px;
}

.anwa-item {
    background: var(--white);
    padding: 12px 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    text-align: center;
}

.anwa-label {
    font-size: 0.72rem;
    font-weight: 600;
    color: var(--gray-500);
}

.anwa-value {
    font-family: var(--font-display);
    font-size: 0.92rem;
    font-weight: 700;
    color: var(--gold-600);
    line-height: 1.3;
}

/* ─── طور القمر ────────────────────────────────────────────── */
.moon-phase-section {
    padding: 14px 20px;
    border-top: 1px solid var(--gray-100);
    background: var(--white);
}

.moon-phase-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
}

.moon-current {
    display: flex;
    align-items: center;
    gap: 12px;
    flex: 1;
}

.moon-symbol {
    font-size: 2.2rem;
    line-height: 1;
    color: var(--gray-700);
    text-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

.moon-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
    flex: 1;
}

.moon-name {
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 700;
    color: var(--gray-800);
}

.moon-details {
    font-size: 0.75rem;
    color: var(--gray-500);
}

.moon-next {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 2px;
    text-align: end;
    flex-shrink: 0;
}

.moon-next-label {
    font-size: 0.68rem;
    font-weight: 600;
    color: var(--gray-400);
    text-transform: uppercase;
}

.moon-next-value {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--gray-600);
}

.moon-bar-container {
    margin-top: 10px;
    height: 6px;
    background: var(--gray-100);
    border-radius: 3px;
    overflow: hidden;
}

.moon-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--gold-500), var(--gold-300));
    border-radius: 3px;
    transition: width 0.5s ease;
}

/* ─── المد والجزر ──────────────────────────────────────────── */
.tide-section {
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px dashed var(--gray-100);
}

.tide-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px;
}

.tide-icon {
    font-size: 1.2rem;
}

.tide-type {
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 700;
    color: var(--gray-700);
}

.tide-section.tide-spring .tide-type {
    color: #0369a1;
}

.tide-section.tide-neap .tide-type {
    color: var(--gray-400);
}

.tide-events {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
}

.tide-event {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: var(--radius-sm);
    background: var(--gray-50);
    flex: 1;
    min-width: 100px;
    justify-content: center;
}

.tide-event-high {
    background: rgba(3, 105, 161, 0.08);
}

.tide-event-low {
    background: var(--gray-50);
}

.tide-event-label {
    font-size: 0.88rem;
    font-weight: 700;
    color: var(--gray-600);
}

.tide-event-high .tide-event-label {
    color: #0369a1;
}

.tide-event-time {
    font-family: var(--font-display);
    font-size: 1.05rem;
    font-weight: 700;
    color: var(--gray-800);
    direction: ltr;
}

/* ─── الوضع الداكن — القمر والمد ──────────────────────────── */
[data-theme="dark"] .moon-symbol {
    color: var(--gray-300);
    text-shadow: 0 1px 3px rgba(255,255,255,0.15);
}

[data-theme="dark"] .moon-name {
    color: var(--gray-800);
}

[data-theme="dark"] .moon-details {
    color: var(--gray-400);
}

[data-theme="dark"] .moon-next-value {
    color: var(--gray-400);
}

[data-theme="dark"] .moon-bar-container {
    background: rgba(255,255,255,0.1);
}

[data-theme="dark"] .moon-bar {
    background: linear-gradient(90deg, #d97706, #f59e0b);
}

[data-theme="dark"] .tide-section {
    border-top-color: rgba(255,255,255,0.08);
}

[data-theme="dark"] .tide-type {
    color: var(--gray-500);
}

[data-theme="dark"] .tide-section.tide-spring .tide-type {
    color: #38bdf8;
}

[data-theme="dark"] .tide-event {
    background: rgba(255,255,255,0.04);
}

[data-theme="dark"] .tide-event-high {
    background: rgba(56, 189, 248, 0.08);
}

[data-theme="dark"] .tide-event-high .tide-event-label {
    color: #38bdf8;
}

[data-theme="dark"] .tide-event-label {
    color: var(--gray-400);
}

[data-theme="dark"] .tide-event-time {
    color: var(--gray-500);
}

/* ─── وصف حالة الطقس ────────────────────────────────────── */
.anwa-weather {
    padding: 14px 20px;
    font-size: 0.85rem;
    line-height: 1.7;
    color: var(--gray-600);
    border-top: 1px solid var(--gray-100);
    background: var(--gold-100);
}

.anwa-weather:empty {
    display: none;
}

[data-theme="dark"] .anwa-weather {
    background: transparent;
    color: var(--gray-400);
    border-top-color: rgba(255,255,255,0.06);
}

/* ─── سطر الأنواء في شريط المعلومات ─────────────────────── */
.info-anwa {
    font-size: 0.75rem;
    color: var(--gold-600);
    margin-top: 4px;
    line-height: 1.4;
}

/* ─── نقطة بداية طالع جديد ──────────────────────────────── */
.anwa-dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    position: absolute;
    top: 3px;
    left: 3px;
}

.anwa-dot-tale3 {
    background: var(--gold-500);
}

.calendar-cell.today .anwa-dot {
    background: var(--gold-300);
}

/* ─── رمز طور القمر في خلية التقويم ─────────────────────── */
.cell-moon-phase {
    position: absolute;
    top: 1px;
    right: 2px;
    font-size: 0.7rem;
    line-height: 1;
    color: var(--gray-300);
    pointer-events: none;
}

.calendar-cell.today .cell-moon-phase {
    color: rgba(255, 255, 255, 0.7);
}

.calendar-cell.other-month .cell-moon-phase {
    color: var(--gray-500);
}

/* ─── قسم ولادة الهلال ──────────────────────────────────── */
.hilal-section {
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--gray-100);
}

.hilal-header {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 10px;
}

.hilal-icon {
    font-size: 1.1rem;
}

.hilal-title {
    font-family: var(--font-display);
    font-size: 0.92rem;
    font-weight: 700;
    color: var(--green-800);
}

.hilal-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 8px;
}

.hilal-item {
    display: flex;
    flex-direction: column;
    gap: 2px;
    background: var(--gray-50);
    padding: 8px 10px;
    border-radius: var(--radius-md);
}

.hilal-label {
    font-size: 0.72rem;
    font-weight: 600;
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.02em;
}

.hilal-value {
    font-family: var(--font-display);
    font-size: 0.88rem;
    font-weight: 700;
    color: var(--green-900);
}

.hilal-time {
    font-size: 1rem;
    color: var(--green-700);
}

.hilal-vis-item {
    grid-column: 1 / -1;
    text-align: center;
    padding: 10px;
}

.hilal-vis-visible {
    color: #16a34a;
    font-weight: 800;
    font-size: 0.95rem;
}

.hilal-vis-possible {
    color: #ca8a04;
    font-weight: 800;
    font-size: 0.95rem;
}

.hilal-vis-difficult {
    color: #ea580c;
    font-weight: 800;
    font-size: 0.95rem;
}

.hilal-vis-impossible {
    color: #dc2626;
    font-weight: 800;
    font-size: 0.95rem;
}

/* الوضع الداكن — الهلال */
[data-theme="dark"] .hilal-section {
    border-top-color: var(--gray-700);
}

[data-theme="dark"] .hilal-title {
    color: var(--green-300);
}

[data-theme="dark"] .hilal-item {
    background: var(--gray-800);
}

[data-theme="dark"] .hilal-label {
    color: var(--gray-400);
}

[data-theme="dark"] .hilal-value {
    color: var(--gray-100);
}

[data-theme="dark"] .hilal-time {
    color: var(--green-400);
}

[data-theme="dark"] .cell-moon-phase {
    color: var(--gray-500);
}

/* ─── زر التثبيت ─────────────────────────────────────────── */
.install-btn {
    margin-top: 12px;
    font-size: 0.78rem;
}

/* ─── الاستجابة ──────────────────────────────────────────── */

/* ── أجهزة لوحية ── */
@media (max-width: 768px) {
    .container {
        padding: 20px 12px 40px;
    }

    .prayer-grid {
        grid-template-columns: repeat(3, 1fr);
    }

    .tool-group {
        min-width: 160px;
    }

    .toolbar-row {
        gap: 12px;
    }
}

/* ── هواتف ── */
@media (max-width: 600px) {
    .container {
        padding: 16px 10px 32px;
    }

    .header h1 {
        font-size: 1.6rem;
    }

    .nav-bar .month-title {
        font-size: 1.2rem;
    }

    .day-headers {
        grid-template-columns: 32px repeat(7, 1fr);
    }

    .calendar-grid {
        grid-template-columns: 32px repeat(7, 1fr);
    }

    .week-number {
        font-size: 0.6rem;
        min-height: 50px;
    }

    .calendar-cell {
        min-height: 50px;
        padding: 6px 3px;
    }

    .calendar-cell .hijri-day {
        font-size: 1rem;
    }

    .calendar-cell .greg-day {
        font-size: 0.6rem;
    }

    .today-card {
        padding: 14px 16px;
        gap: 12px;
    }

    .today-card .date-icon {
        width: 42px;
        height: 42px;
        font-size: 1.1rem;
    }

    .input-row {
        gap: 6px;
    }

    .prayer-grid {
        grid-template-columns: repeat(3, 1fr);
    }

    .prayer-item {
        padding: 8px 4px;
    }

    .prayer-name {
        font-size: 0.68rem;
    }

    .prayer-time {
        font-size: 0.9rem;
    }

    .anwa-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .anwa-item {
        padding: 10px 8px;
    }

    .anwa-value {
        font-size: 0.82rem;
    }

    /* ديرة الدرور — تمرير أفقي لمنع ضغط النصوص */
    .durur-circle-container {
        width: calc(100vw - 12px);
        max-width: none;
        margin-inline-start: -6px;
        margin-inline-end: -6px;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .durur-circle-svg {
        min-width: 500px;
    }
}

/* ── هواتف قياسية ── */
@media (max-width: 480px) {
    .container {
        padding: 12px 6px 24px;
    }

    /* شبكة التقويم */
    .day-headers {
        grid-template-columns: 24px repeat(7, 1fr);
    }

    .calendar-grid {
        grid-template-columns: 24px repeat(7, 1fr);
    }

    .week-number {
        font-size: 0.55rem;
        min-height: 44px;
    }

    .calendar-cell {
        min-height: 44px;
        padding: 4px 2px;
    }

    .calendar-cell .hijri-day {
        font-size: 0.95rem;
    }

    .calendar-cell .greg-day {
        font-size: 0.58rem;
    }

    .day-header {
        font-size: 0.68rem;
        padding: 6px 2px;
    }

    .day-header.week-header {
        font-size: 0.55rem;
    }

    /* عرض اليوم — أحجام مرنة */
    .dv-day-name {
        font-size: clamp(2.4rem, 9vw, 4rem);
        margin-bottom: 8px;
    }

    .dv-dates {
        padding: 0 10px;
    }

    .dv-date-num {
        font-size: clamp(2.2rem, 8vw, 3.8rem);
    }

    .dv-date-month {
        font-size: clamp(1rem, 3.5vw, 1.5rem);
    }

    .dv-date-year {
        font-size: clamp(1.2rem, 4vw, 1.9rem);
    }

    .dv-arab-time {
        font-size: clamp(1rem, 3.5vw, 1.45rem);
    }

    .dv-card {
        padding: 20px 10px 16px;
    }

    .day-view {
        padding: 12px 8px 20px;
    }

    /* مواقيت الصلاة */
    .prayer-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .prayer-name {
        font-size: 0.72rem;
    }

    .prayer-time {
        font-size: 0.95rem;
    }

    .prayer-item {
        padding: 8px 6px;
    }

    /* شريط التنقل */
    .nav-bar .month-title {
        font-size: 1.1rem;
    }

    .nav-bar .gregorian-range {
        font-size: 0.72rem;
    }

    .nav-bar .nav-btn {
        width: 34px;
        height: 34px;
    }

    .today-nav-btn {
        font-size: 0.72rem;
        padding: 4px 10px;
    }

    /* الموقع في العمود الأوسط */
    .dv-location {
        font-size: clamp(1rem, 4vw, 2.2rem);
        line-height: 1.2;
    }

    .dv-suburb {
        font-size: 0.75rem;
    }

    /* قوس الشمس */
    .sun-arc-svg {
        max-width: 100%;
    }

    .arc-label {
        font-size: 13px;
    }

    .sun-arc-info {
        gap: 12px;
        font-size: 0.8rem;
    }

    /* شريط الأدوات */
    .toolbar-card {
        padding: 10px 12px;
    }

    .toolbar-row {
        gap: 10px;
    }

    .tool-group {
        min-width: 140px;
    }

    .tool-label {
        font-size: 0.68rem;
    }

    .mode-select {
        font-size: 0.78rem;
        padding: 6px 8px;
    }

    /* الانتقال إلى تاريخ */
    .goto-body {
        padding: 10px 12px;
    }

    .input-row {
        gap: 4px;
    }

    .input-group input {
        padding: 6px 6px;
        font-size: 0.85rem;
    }

    .convert-btn {
        font-size: 0.78rem;
        padding: 6px 14px;
    }

    /* جدول المواقيت الشهري */
    .timetable {
        font-size: 0.68rem;
    }

    .timetable th {
        padding: 4px 2px;
    }

    .timetable td {
        padding: 3px 2px;
    }

    /* قوس عرض اليوم */
    .dv-arc-svg {
        max-width: 100%;
    }

    .dv-arc-svg .arc-label {
        font-size: 13px;
    }

    .dv-arc-info {
        gap: 10px;
        font-size: 0.8rem;
    }
}

@media (max-width: 380px) {
    .container {
        padding: 8px 4px 20px;
    }

    .day-headers {
        grid-template-columns: 20px repeat(7, 1fr);
    }

    .calendar-grid {
        grid-template-columns: 20px repeat(7, 1fr);
    }

    .day-header {
        font-size: 0.62rem;
        padding: 6px 1px;
    }

    .day-header.week-header {
        font-size: 0.52rem;
    }

    .week-number {
        font-size: 0.52rem;
        min-height: 40px;
    }

    .calendar-cell {
        min-height: 40px;
        padding: 3px 1px;
    }

    .calendar-cell .hijri-day {
        font-size: 0.85rem;
    }

    .calendar-cell .greg-day {
        font-size: 0.5rem;
    }

    .cell-moon-phase {
        display: none;
    }

    /* عرض اليوم — هواتف صغيرة */
    .dv-dates {
        padding: 0 4px;
    }

    .dv-date-num {
        font-size: 2rem;
    }

    .dv-date-month {
        font-size: 0.9rem;
    }

    .dv-date-year {
        font-size: 1.1rem;
    }

    .dv-arab-time {
        font-size: 0.95rem;
    }

    .dv-location {
        font-size: 0.9rem;
    }

    /* شبكة الأنواء — عمود واحد */
    .anwa-grid {
        grid-template-columns: 1fr;
    }

    .anwa-item {
        flex-direction: row;
        justify-content: space-between;
        padding: 8px 12px;
    }

    .anwa-value {
        font-size: 0.78rem;
    }

    /* ديرة الدرور — أصغر */
    .durur-circle-svg {
        min-width: 440px;
    }
}

/* ═══════════════════════════════════════════════════════════
   رمضان — عداد الليالي
   ═══════════════════════════════════════════════════════════ */
.ramadan-section {
    margin-top: 12px;
    padding: 10px 14px;
    border-radius: 10px;
    background: linear-gradient(135deg, #1a5c42 0%, #14553f 100%);
    color: #fff;
    text-align: center;
}
.ramadan-night {
    font-size: 1.1rem;
    font-weight: 700;
    margin-bottom: 4px;
}
.ramadan-info {
    display: flex;
    justify-content: center;
    gap: 16px;
    font-size: 0.85rem;
    flex-wrap: wrap;
}
.ramadan-imsak, .ramadan-fasting {
    opacity: 0.9;
}
.ramadan-last-ten {
    background: linear-gradient(135deg, #1a3c6e 0%, #1a5070 100%);
}
.ramadan-qadr {
    background: linear-gradient(135deg, #7b5e00 0%, #5e4600 100%);
    box-shadow: 0 0 15px rgba(255, 200, 0, 0.3);
}
.ramadan-qadr-text {
    color: #ffd700;
    font-weight: 700;
}
[data-theme="dark"] .ramadan-section {
    background: linear-gradient(135deg, #0e3526 0%, #0a2a1e 100%);
}
[data-theme="dark"] .ramadan-last-ten {
    background: linear-gradient(135deg, #0e2540 0%, #0e2d40 100%);
}
[data-theme="dark"] .ramadan-qadr {
    background: linear-gradient(135deg, #4a3800 0%, #3a2c00 100%);
}

/* ═══════════════════════════════════════════════════════════
   قوس الشمس
   ═══════════════════════════════════════════════════════════ */
.sun-arc-container {
    margin-top: 14px;
    text-align: center;
    padding: 4px 0;
}
.sun-arc-svg {
    width: 100%;
    max-width: 360px;
    height: auto;
    display: block;
    margin: 0 auto;
    overflow: visible;
}
:root {
    --arc-night: #4a5d72;
    --arc-day: #f4a940;
    --arc-marker: #14553f;
    --arc-sun: #f4a940;
    --arc-label-color: #94a3b8;
}
[data-theme="dark"] {
    --arc-night: #3a4d60;
    --arc-day: #e09030;
    --arc-marker: #6cb898;
    --arc-sun: #e09030;
    --arc-label-color: #b0bcc8;
}
.arc-label {
    font-size: 11px;
    font-weight: 600;
    fill: var(--arc-label-color);
    font-family: 'Calibri', 'Cairo', sans-serif;
}
.sun-dot {
    filter: drop-shadow(0 0 6px rgba(244, 169, 64, 0.9));
}
.sun-arc-info {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 24px;
    margin-top: 10px;
    font-size: 0.88rem;
    color: var(--text-secondary);
    font-weight: 500;
}

/* Day View arc info */
.dv-arc-info {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 20px;
    margin-top: 40px;
    font-size: 0.88rem;
    color: var(--text-secondary);
    font-weight: 500;
}

/* ═══════════════════════════════════════════════════════════
   الساعة العربية — Arabic Analog Clock
   ═══════════════════════════════════════════════════════════ */
.arabic-clock-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    margin-top: 10px;
    padding: 4px 0;
}
.arabic-clock-label {
    color: var(--gold, #f4a940);
    font-size: 0.85rem;
    font-weight: 600;
    margin-bottom: 6px;
    letter-spacing: 0.5px;
    opacity: 0.8;
}
.arabic-clock-svg {
    filter: drop-shadow(0 0 12px rgba(244, 169, 64, 0.15));
}
.arabic-clock-time {
    color: var(--gold, #f4a940);
    font-size: 1.4rem;
    font-weight: 700;
    margin-top: 4px;
}
[data-theme="dark"] .arabic-clock-svg {
    filter: drop-shadow(0 0 16px rgba(244, 169, 64, 0.2));
}

/* ═══════════════════════════════════════════════════════════
   نتيجة التحويل
   ═══════════════════════════════════════════════════════════ */
.converter-result {
    margin-top: 12px;
    padding: 12px;
    background: var(--bg-secondary);
    border-radius: 8px;
    border-right: 3px solid #14553f;
}
[dir="ltr"] .converter-result {
    border-right: none;
    border-left: 3px solid #14553f;
}
.converter-text {
    margin-bottom: 8px;
}
.converter-day {
    font-weight: 700;
    font-size: 1rem;
    color: #14553f;
}
[data-theme="dark"] .converter-day {
    color: #6cb898;
}
.converter-hijri, .converter-greg, .converter-event, .converter-anwa {
    font-size: 0.9rem;
    margin-top: 2px;
}
.converter-event {
    color: #14553f;
    font-weight: 600;
}
[data-theme="dark"] .converter-event {
    color: #6cb898;
}
.converter-copy-btn {
    font-size: 0.8rem;
    padding: 4px 12px;
}

/* ═══════════════════════════════════════════════════════════
   زر المشاركة
   ═══════════════════════════════════════════════════════════ */
.share-btn {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--text-secondary);
    padding: 4px;
    border-radius: 6px;
    transition: color 0.2s, background 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}
.share-btn:hover {
    color: #14553f;
    background: rgba(20, 85, 63, 0.1);
}
[data-theme="dark"] .share-btn:hover {
    color: #6cb898;
    background: rgba(108, 184, 152, 0.1);
}
.today-card {
    position: relative;
}
.today-card .share-btn {
    position: absolute;
    top: 12px;
    left: 12px;
}
[dir="ltr"] .today-card .share-btn {
    left: auto;
    right: 12px;
}
.share-btn-prayer {
    margin-inline-start: auto;
}
.share-toast {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: #333;
    color: #fff;
    padding: 8px 20px;
    border-radius: 20px;
    font-size: 0.85rem;
    opacity: 0;
    transition: all 0.3s ease;
    z-index: 9999;
    pointer-events: none;
}
.share-toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

/* ═══════════════════════════════════════════════════════════
   الأذكار
   ═══════════════════════════════════════════════════════════ */
.adhkar-card {
    background: var(--bg-card);
    border-radius: 14px;
    margin-bottom: 16px;
    box-shadow: var(--shadow);
    overflow: hidden;
}
.adhkar-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 14px 18px;
    cursor: pointer;
    background: linear-gradient(135deg, #14553f 0%, #1a6b50 100%);
    color: #fff;
    font-weight: 700;
    font-size: 1rem;
    user-select: none;
}
.adhkar-arrow {
    margin-inline-start: auto;
    font-size: 0.8rem;
    transition: transform 0.2s;
}
.adhkar-body {
    padding: 12px;
}
.adhkar-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
}
.adhkar-tab {
    flex: 1;
    padding: 8px;
    border: 2px solid #14553f;
    background: transparent;
    color: #14553f;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.85rem;
    font-family: inherit;
    transition: all 0.2s;
}
.adhkar-tab.active {
    background: #14553f;
    color: #fff;
}
[data-theme="dark"] .adhkar-tab {
    border-color: #6cb898;
    color: #6cb898;
}
[data-theme="dark"] .adhkar-tab.active {
    background: #6cb898;
    color: #1a1a2e;
}
.adhkar-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}
.dhikr-item {
    padding: 12px;
    background: var(--bg-secondary);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
    user-select: none;
    border-right: 3px solid #14553f;
}
[dir="ltr"] .dhikr-item {
    border-right: none;
    border-left: 3px solid #14553f;
}
.dhikr-item:active {
    transform: scale(0.98);
}
.dhikr-item.dhikr-done {
    opacity: 0.5;
    border-color: #4caf50;
    cursor: default;
}
.dhikr-item.dhikr-pulse {
    background: rgba(20, 85, 63, 0.1);
}
.dhikr-text {
    font-size: 0.95rem;
    line-height: 1.6;
    margin-bottom: 6px;
}
.dhikr-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    color: var(--text-secondary);
}
.dhikr-source {
    opacity: 0.7;
}
.dhikr-counter {
    background: #14553f;
    color: #fff;
    padding: 2px 10px;
    border-radius: 12px;
    font-weight: 700;
    font-size: 0.8rem;
    min-width: 30px;
    text-align: center;
}
.dhikr-done .dhikr-counter {
    background: #4caf50;
}

/* ═══════════════════════════════════════════════════════════
   تصدير PDF
   ═══════════════════════════════════════════════════════════ */
.export-pdf-btn {
    margin-inline-start: 4px;
}

/* ═══════════════════════════════════════════════════════════
   واجهة اليوم — Day View (الشاشة الرئيسية)
   ═══════════════════════════════════════════════════════════ */
.day-view {
    text-align: center;
    padding: 20px 16px 30px;
    position: relative;
    /* ─── نسيج البردي (متغيرات) ─── */
    background:
        radial-gradient(ellipse 80px 60px at 15% 20%, rgba(var(--tex-spot-r),var(--tex-spot-g),var(--tex-spot-b),0.12) 0%, transparent 70%),
        radial-gradient(ellipse 120px 80px at 75% 15%, rgba(var(--tex-spot-r),var(--tex-spot-g),var(--tex-spot-b),0.10) 0%, transparent 70%),
        radial-gradient(ellipse 90px 70px at 50% 45%, rgba(var(--tex-spot-r),var(--tex-spot-g),var(--tex-spot-b),0.08) 0%, transparent 70%),
        radial-gradient(ellipse 100px 60px at 25% 70%, rgba(var(--tex-spot-r),var(--tex-spot-g),var(--tex-spot-b),0.10) 0%, transparent 70%),
        radial-gradient(ellipse 110px 90px at 80% 60%, rgba(var(--tex-spot-r),var(--tex-spot-g),var(--tex-spot-b),0.09) 0%, transparent 70%),
        radial-gradient(ellipse 70px 50px at 60% 85%, rgba(var(--tex-spot-r),var(--tex-spot-g),var(--tex-spot-b),0.11) 0%, transparent 70%),
        repeating-linear-gradient(0deg, transparent, transparent 3px, var(--tex-fiber) 3px, var(--tex-fiber) 4px),
        repeating-linear-gradient(90deg, transparent, transparent 8px, var(--tex-fiber-v) 8px, var(--tex-fiber-v) 9px),
        linear-gradient(180deg, var(--tex-grad-top) 0%, var(--tex-grad-mid1) 30%, var(--tex-grad-mid2) 60%, var(--tex-grad-bottom) 100%);
    background-attachment: local;
}
.calendar-view {
    /* inherits normal layout */
}

/* ─── Card wrapper ─── */
.dv-card {
    border: 2px solid var(--papyrus-border);
    border-radius: 20px;
    padding: 24px 16px 20px;
    background: var(--papyrus-card);
    box-shadow: 0 2px 12px rgba(100, 60, 20, 0.1);
    position: relative;
}
[data-theme="dark"] .dv-card {
    border-color: rgba(139,90,43,0.2);
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.4);
    background: rgba(30,24,14,0.7);
}

/* ─── Top controls (lang + theme) ─── */
.dv-top-controls {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    display: flex;
    align-items: center;
    gap: 8px;
}
.dv-lang-toggle {
    display: flex;
    gap: 0;
    border-radius: 16px;
    overflow: hidden;
    border: 1.5px solid var(--papyrus-border);
    box-shadow: 0 1px 4px rgba(100, 60, 20, 0.12);
}
.dv-theme-btn {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 1.5px solid var(--papyrus-border);
    background: var(--papyrus-card);
    cursor: pointer;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s, box-shadow 0.2s;
    box-shadow: 0 1px 4px rgba(100, 60, 20, 0.12);
    padding: 0;
    line-height: 1;
}
.dv-theme-btn:active {
    background: var(--papyrus-dark);
}
[data-theme="dark"] .dv-theme-btn {
    background: rgba(30,24,14,0.7);
    border-color: rgba(139,90,43,0.25);
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.4);
}
[data-theme="dark"] .dv-theme-btn:active {
    background: rgba(139,90,43,0.2);
}
.dv-lang-btn {
    padding: 4px 14px;
    border: none;
    background: var(--papyrus-card);
    color: var(--papyrus-text-secondary);
    font-family: inherit;
    font-size: 0.8rem;
    cursor: pointer;
    transition: background 0.2s, color 0.2s;
    line-height: 1.3;
}
.dv-lang-btn.active {
    background: linear-gradient(135deg, var(--btn-grad-from), var(--btn-grad-to));
    color: var(--btn-text);
    font-weight: 700;
}
.dv-lang-btn:not(.active):hover {
    background: var(--papyrus-section);
}
[data-theme="dark"] .dv-lang-toggle {
    border-color: rgba(139,90,43,0.25);
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.4);
}
[data-theme="dark"] .dv-lang-btn {
    background: rgba(30,24,14,0.7);
    color: var(--gray-500);
}
[data-theme="dark"] .dv-lang-btn.active {
    background: linear-gradient(135deg, var(--btn-grad-from), var(--btn-grad-to));
    color: var(--btn-text);
}
[data-theme="dark"] .dv-lang-btn:not(.active):hover {
    background: rgba(139,90,43,0.15);
}

/* ─── Navigation arrows ─── */
.dv-nav-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 10;
    background: var(--papyrus-card);
    border: 1.5px solid var(--papyrus-border);
    color: var(--papyrus-text);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    font-size: 1rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s, box-shadow 0.2s;
    box-shadow: 0 1px 4px rgba(100, 60, 20, 0.12);
    line-height: 1;
    padding: 0;
    font-family: inherit;
}
.dv-nav-arrow:active {
    background: var(--papyrus-dark);
    box-shadow: 0 0 0 rgba(0, 0, 0, 0);
}
[data-theme="dark"] .dv-nav-arrow {
    background: rgba(30,24,14,0.7);
    border-color: rgba(139,90,43,0.25);
    color: var(--gray-500);
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.4);
}
[data-theme="dark"] .dv-nav-arrow:active {
    background: rgba(139,90,43,0.2);
}
/* RTL: "next" is on the LEFT, "prev" is on the RIGHT */
.dv-nav-next {
    left: 0px;
}
.dv-nav-prev {
    right: 0px;
}

/* ─── Day name ─── */
.dv-day-name {
    font-size: 4.0rem;
    font-weight: 800;
    color: var(--papyrus-text);
    margin-bottom: 12px;
    letter-spacing: 1px;
}
[data-theme="dark"] .dv-day-name {
    color: var(--text-primary);
}

/* ─── Dates two-column ─── */
.dv-dates {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding: 0 60px;
}
.dv-date-col {
    text-align: center;
    flex: 0 0 auto;
}
.dv-date-center {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
.dv-date-num {
    font-size: 3.8rem;
    font-weight: 800;
    line-height: 1;
    color: var(--papyrus-text);
}
[data-theme="dark"] .dv-date-num { color: var(--text-primary); }
.dv-date-month {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--papyrus-text);
    margin-top: 2px;
}
[data-theme="dark"] .dv-date-month { color: var(--text-primary); }
.dv-date-year {
    font-size: 1.9rem;
    font-weight: 700;
    color: var(--papyrus-text);
}
[data-theme="dark"] .dv-date-year { color: var(--text-primary); }

/* ─── Arabic Time Name ─── */
.dv-arab-time {
    font-size: 1.45rem;
    font-weight: 600;
    text-align: center;
    margin-top: 2px;
    letter-spacing: 0.5px;
    position: relative;
    color: var(--papyrus-text, #3d2517);
}
[data-theme="dark"] .dv-arab-time {
    color: var(--text-primary, #f5edd8);
}
.dv-arab-time-help {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: 1.5px solid var(--papyrus-text-secondary, #6b4c35);
    font-size: 0.65rem;
    font-weight: 700;
    color: var(--papyrus-text-secondary, #6b4c35);
    cursor: pointer;
    margin-inline-start: 4px;
    vertical-align: middle;
    opacity: 0.6;
    transition: opacity 0.2s;
}
.dv-arab-time-help:hover { opacity: 1; }
[data-theme="dark"] .dv-arab-time-help {
    border-color: var(--text-secondary, #94a3b8);
    color: var(--text-secondary, #94a3b8);
}
.dv-arab-time-tooltip {
    position: absolute;
    top: calc(100% + 6px);
    left: 50%;
    transform: translateX(-50%);
    background: #faf4e8;
    color: #3d2517;
    border: 1px solid rgba(139,90,43,0.25);
    border-radius: 10px;
    padding: 10px 14px;
    font-size: 0.82rem;
    font-weight: 500;
    line-height: 1.6;
    text-align: center;
    min-width: 220px;
    max-width: 300px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    z-index: 100;
    white-space: normal;
}
.dv-arab-time-tooltip .att-title {
    font-weight: 700;
    font-size: 0.75rem;
    opacity: 0.6;
    margin-bottom: 4px;
}
.dv-arab-time-tooltip .att-desc {
    font-size: 0.85rem;
    line-height: 1.7;
}
.dv-arab-time-tooltip .att-src {
    font-size: 0.68rem;
    opacity: 0.5;
    margin-top: 6px;
}
[data-theme="dark"] .dv-arab-time-tooltip {
    background: #1a1510;
    color: #f5edd8;
    border-color: rgba(255,255,255,0.15);
    box-shadow: 0 4px 16px rgba(0,0,0,0.5);
}

/* ─── Event ─── */
.dv-event {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--gold-600, #b45309);
    margin-top: 4px;
    text-align: center;
}
[data-theme="dark"] .dv-event {
    color: var(--gold-400, #f4a940);
}

/* ─── Location ─── */
.dv-location {
    font-size: 2.2rem;
    font-weight: 600;
    color: var(--papyrus-text);
    text-align: center;
    line-height: 1.3;
}
[data-theme="dark"] .dv-location { color: var(--text-secondary); }
@media (max-width: 480px) {
    .dv-location { font-size: clamp(1rem, 4vw, 2.2rem); line-height: 1.2; }
    .dv-suburb { font-size: 0.75rem; }
}
@media (max-width: 380px) {
    .dv-location { font-size: 0.9rem; }
}
.dv-suburb {
    font-size: 1rem;
    font-weight: 400;
    opacity: 0.7;
}

/* ─── استجابة عرض اليوم (بعد الأنماط الأساسية) ─── */
@media (max-width: 480px) {
    .day-view { padding: 12px 8px 20px; }
    .dv-card { padding: 20px 10px 16px; }
    .dv-day-name { font-size: clamp(2.4rem, 9vw, 4rem); margin-bottom: 8px; }
    .dv-dates { padding: 0 10px; }
    .dv-date-num { font-size: clamp(2.2rem, 8vw, 3.8rem); }
    .dv-date-month { font-size: clamp(1rem, 3.5vw, 1.5rem); }
    .dv-date-year { font-size: clamp(1.2rem, 4vw, 1.9rem); }
    .dv-arab-time { font-size: clamp(1rem, 3.5vw, 1.45rem); }
}
@media (max-width: 380px) {
    .dv-dates { padding: 0 4px; }
    .dv-date-num { font-size: 2rem; }
    .dv-date-month { font-size: 0.9rem; }
    .dv-date-year { font-size: 1.1rem; }
    .dv-arab-time { font-size: 0.95rem; }
}

/* ─── Arc section ─── */
.dv-arc-section {
    max-width: 420px;
    margin: 0 auto;
}
.dv-arc-svg {
    width: 100%;
    height: auto;
    display: block;
    overflow: visible;
}
.dv-arc-svg .arc-label {
    fill: var(--arc-label);
    opacity: 1;
    font-weight: 800;
}
.dv-arc-svg .arc-time {
    fill: var(--arc-label);
    opacity: 1;
    font-weight: 800;
}

/* ─── Moon ─── */
.dv-moon-container {
    margin: 15px auto 10px;
    text-align: center;
}
.dv-moon-face {
    display: inline-block;
}
.dv-moon-face img,
.dv-moon-face svg {
    filter: drop-shadow(0 0 8px rgba(139,90,43,0.4)) drop-shadow(0 0 20px rgba(180,140,80,0.25));
}
[data-theme="dark"] .dv-moon-face img,
[data-theme="dark"] .dv-moon-face svg {
    filter: drop-shadow(0 0 6px rgba(200, 200, 180, 0.3));
}
.dv-moon-label {
    font-size: 0.85rem;
    color: var(--papyrus-text-secondary);
    margin-top: 4px;
}
[data-theme="dark"] .dv-moon-label { color: var(--text-secondary); }
.dv-moon-illumination {
    font-size: 0.75rem;
    color: var(--papyrus-text-secondary);
    margin-top: 2px;
    opacity: 0.8;
}
[data-theme="dark"] .dv-moon-illumination { color: var(--text-secondary); }
.dv-moon-clickable { cursor: pointer; }
.dv-moon-clickable:active { opacity: 0.7; }

/* ─── Moon Phases Detail Page ─── */
/* ─── شبكة أطوار القمر — يوم بيوم ─── */
.moon-phases-timeline {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    padding: 16px 8px;
}
.moon-daily-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(62px, 1fr));
    gap: 6px;
    padding: 12px 8px;
}
.moon-daily-item {
    text-align: center;
    background: rgba(255,248,235,0.6);
    border: 1px solid rgba(139,90,43,0.15);
    border-radius: 10px;
    padding: 8px 4px 6px;
}
.moon-daily-day {
    font-size: 0.8rem;
    font-weight: 700;
    color: #4a3520;
    margin-bottom: 4px;
}
[data-theme="dark"] .moon-daily-day { color: #f5edd8; }
[data-theme="dark"] .moon-daily-item {
    background: rgba(255,255,255,0.05);
    border-color: rgba(255,255,255,0.1);
}
.moon-daily-item.current {
    border: 2px solid #c49440;
    background: rgba(196,148,64,0.12);
    box-shadow: 0 0 10px rgba(196,148,64,0.18);
}
[data-theme="dark"] .moon-daily-item.current {
    background: rgba(196,148,64,0.15);
    border-color: #d4a84a;
}
.moon-phase-visual { margin: 0 auto 4px; }
.moon-phase-visual img,
.moon-phase-visual canvas {
    display: block;
    margin: 0 auto;
    border-radius: 50%;
    width: 40px;
    height: 40px;
}
.moon-phase-name {
    font-size: 0.62rem;
    font-weight: 600;
    color: #4a3520;
    margin-bottom: 2px;
    line-height: 1.2;
}
[data-theme="dark"] .moon-phase-name { color: #f5edd8; }
.moon-phase-hijri-date {
    font-size: 0.68rem;
    font-weight: 700;
    color: #4a3520;
}
[data-theme="dark"] .moon-phase-hijri-date { color: #f5edd8; }
.moon-phase-greg-date {
    font-size: 0.55rem;
    color: #a09080;
    margin-top: 2px;
}
[data-theme="dark"] .moon-phase-greg-date { color: rgba(255,255,255,0.5); }
.moon-phase-illum {
    font-size: 0.6rem;
    color: #c49440;
    font-weight: 600;
    margin-top: 2px;
}
[data-theme="dark"] .moon-phase-illum { color: #d4a84a; }
@media (max-width: 600px) {
    .moon-daily-grid {
        grid-template-columns: repeat(auto-fill, minmax(56px, 1fr));
        gap: 4px;
        padding: 8px 4px;
    }
    .moon-daily-item { padding: 6px 2px 4px; }
    .moon-phase-visual canvas { width: 34px; height: 34px; }
}

/* ─── Moonrise / Moonset ─── */
.dv-moonrise-section {
    max-width: 420px;
    margin: 8px auto;
}
.dv-moonrise-row {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
}
.dv-moonrise-item {
    background: rgba(245,230,200,0.5);
    padding: 6px 14px;
    border-radius: 8px;
    font-size: 0.82rem;
    color: var(--papyrus-text-secondary);
}
[data-theme="dark"] .dv-moonrise-item {
    background: rgba(30,24,14,0.5);
    color: var(--gray-500);
}
.dv-moonrise-icon { margin-inline-end: 4px; }
.dv-moonrise-dir {
    font-size: 0.72rem;
    opacity: 0.7;
}

/* ─── Tide ─── */
.dv-tide-section {
    max-width: 420px;
    margin: 8px auto;
    background: var(--papyrus-section);
    border-radius: 12px;
    padding: 10px 16px;
    border: 1px solid var(--papyrus-border);
}
[data-theme="dark"] .dv-tide-section {
    background: rgba(30,24,14,0.5);
    border-color: rgba(139,90,43,0.15);
}
.dv-tide-events {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 6px;
}
.dv-tide-item {
    background: rgba(245,230,200,0.5);
    padding: 4px 12px;
    border-radius: 8px;
    font-size: 0.82rem;
    font-weight: 500;
    color: var(--papyrus-text-secondary);
}
[data-theme="dark"] .dv-tide-item {
    background: rgba(30,24,14,0.5);
    color: var(--gray-500);
}
.dv-tide-high {
    background: rgba(139,90,43,0.15);
    font-weight: 700;
    color: var(--papyrus-text);
}
[data-theme="dark"] .dv-tide-high {
    background: rgba(139,90,43,0.2);
    color: var(--gray-700);
}

/* ─── Sections (weather, anwa) ─── */
.dv-section {
    max-width: 420px;
    margin: 8px auto;
    background: var(--papyrus-section);
    border-radius: 12px;
    padding: 10px 16px;
    text-align: start;
    border: 1px solid var(--papyrus-border);
}
[data-theme="dark"] .dv-section {
    background: rgba(30,24,14,0.5);
    border-color: rgba(139,90,43,0.15);
}
.dv-section-title {
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--papyrus-text);
    margin-bottom: 6px;
    text-align: center;
}
[data-theme="dark"] .dv-section-title { color: var(--text-primary); }
.dv-section-body {
    font-size: 0.85rem;
    line-height: 1.7;
    color: var(--papyrus-text-secondary);
}
[data-theme="dark"] .dv-section-body { color: var(--text-secondary); }

/* ─── Live Weather ─── */
.dv-weather-anwa {
    margin-bottom: 10px;
}
.dv-weather-grid {
    display: flex;
    flex-direction: column;
    gap: 8px;
}
.dv-weather-current {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
.dv-weather-icon {
    font-size: 1.8rem;
}
.dv-weather-temp {
    font-size: 1.6rem;
    font-weight: 800;
    color: var(--papyrus-text);
}
[data-theme="dark"] .dv-weather-temp { color: var(--text-primary); }
.dv-weather-desc {
    font-size: 0.9rem;
    color: var(--papyrus-text-secondary);
}
[data-theme="dark"] .dv-weather-desc { color: var(--text-secondary); }
.dv-weather-details {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 12px;
}
.dv-weather-detail {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 60px;
}
.dv-weather-detail-label {
    font-size: 0.7rem;
    color: var(--papyrus-text-secondary);
    margin-bottom: 1px;
}
[data-theme="dark"] .dv-weather-detail-label { color: var(--text-secondary); }
.dv-weather-detail span:last-child {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--papyrus-text);
}
[data-theme="dark"] .dv-weather-detail span:last-child { color: var(--text-primary); }

/* ─── Anwa grid ─── */
.dv-anwa-grid {
    display: flex;
    gap: 8px;
    justify-content: center;
}
.dv-anwa-card {
    flex: 1;
    border: 1px solid var(--papyrus-border);
    border-radius: 10px;
    padding: 10px 6px;
    text-align: center;
    background: rgba(245,230,200,0.4);
}
[data-theme="dark"] .dv-anwa-card {
    border-color: rgba(139,90,43,0.2);
    background: rgba(30,24,14,0.4);
}
.dv-anwa-label {
    font-size: 0.7rem;
    color: var(--papyrus-text-secondary);
    margin-bottom: 4px;
}
[data-theme="dark"] .dv-anwa-label { color: var(--text-secondary); }
.dv-anwa-value {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--papyrus-text);
}
[data-theme="dark"] .dv-anwa-value { color: var(--text-primary); }
.dv-anwa-weather {
    margin-top: 12px;
    padding: 10px 12px;
    font-size: 0.82rem;
    line-height: 1.7;
    color: var(--papyrus-text-secondary);
    text-align: center;
    border-top: 1px solid var(--papyrus-border);
}
[data-theme="dark"] .dv-anwa-weather {
    color: var(--text-secondary);
    border-top-color: rgba(255,255,255,0.06);
}

/* ─── AI Section ─── */
.dv-ai-section {
    margin-top: 16px;
}
.dv-ai-title {
    font-size: 1rem;
    font-weight: 700;
    color: var(--gold);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 6px;
}
.dv-ai-card {
    background: var(--bg-secondary);
    border-radius: 10px;
    padding: 12px 14px;
    margin-bottom: 8px;
}
.dv-ai-card-label {
    font-size: 0.75rem;
    color: var(--gold);
    font-weight: 700;
    margin-bottom: 4px;
}
.dv-ai-card-text {
    font-size: 0.92rem;
    line-height: 1.7;
    color: var(--text-primary);
}
.dv-ai-card-source {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-top: 4px;
    font-style: italic;
}
.dv-ai-skeleton {
    animation: ai-pulse 1.5s ease-in-out infinite;
}
.dv-ai-skeleton .dv-ai-card {
    min-height: 60px;
    position: relative;
    overflow: hidden;
}
.dv-ai-skeleton .dv-ai-card::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
    animation: ai-shimmer 1.5s infinite;
}
@keyframes ai-pulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
}
@keyframes ai-shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}
.dv-ai-error {
    text-align: center;
    color: var(--text-secondary);
    font-size: 0.85rem;
    padding: 16px 0;
}

/* ─── Back button ─── */
.dv-today-btn {
    display: inline-block;
    margin-top: 20px;
    padding: 10px 28px;
    background: var(--btn-grad-from);
    color: var(--btn-text);
    border: none;
    border-radius: var(--radius-xl);
    font-size: 0.95rem;
    font-weight: 700;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s;
}
.dv-today-btn:active {
    opacity: 0.8;
}
.cv-back-container {
    text-align: center;
    margin: 24px 0 8px;
}
/* ─── Calendar view: simplified prayer card ─── */
#calendar-view .prayer-header,
#calendar-view .prayer-no-location,
#calendar-view .ramadan-section,
#calendar-view .sun-arc-container,
#calendar-view .prayer-method-info,
#calendar-view .prayer-timetable-toggle,
#calendar-view .timetable-container,
#calendar-view .prayer-date-indicator {
    display: none !important;
}
.dv-back-btn {
    display: inline-block;
    margin-top: 12px;
    padding: 12px 36px;
    background: linear-gradient(135deg, var(--btn-grad-from), var(--btn-grad-to));
    color: var(--btn-text);
    border: none;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 700;
    font-family: inherit;
    cursor: pointer;
    transition: opacity 0.2s;
}
.dv-back-btn:active {
    opacity: 0.8;
}

/* ─── Share Button (Day View) ─── */
.dv-share-btn {
    display: inline-block;
    margin-top: 20px;
    padding: 12px 36px;
    background: linear-gradient(135deg, var(--btn-grad-from), var(--btn-grad-to));
    color: var(--btn-text);
    border: none;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 700;
    font-family: inherit;
    cursor: pointer;
    transition: opacity 0.2s;
}
.dv-share-btn:active {
    opacity: 0.8;
}

/* ─── Info tooltip (?) button ─── */
.info-help-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 1.5px solid var(--papyrus-text-secondary);
    background: transparent;
    color: var(--papyrus-text-secondary);
    font-size: 0.7rem;
    font-weight: 700;
    font-family: inherit;
    cursor: pointer;
    margin-inline-start: 6px;
    vertical-align: middle;
    opacity: 0.6;
    transition: opacity 0.2s;
}
.info-help-btn:hover {
    opacity: 1;
}
.info-help-popup {
    display: none;
    background: var(--papyrus-card, #fff);
    border: 1.5px solid var(--papyrus-border);
    border-radius: 12px;
    padding: 16px 20px;
    margin-top: 12px;
    font-size: 0.85rem;
    line-height: 1.8;
    color: var(--papyrus-text);
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    text-align: start;
}
.info-help-popup.show {
    display: block;
}
.info-help-popup h4 {
    margin: 0 0 8px;
    font-size: 0.95rem;
    font-weight: 700;
}
[data-theme="dark"] .info-help-btn {
    border-color: rgba(200,180,140,0.4);
    color: rgba(200,180,140,0.6);
}
[data-theme="dark"] .info-help-popup {
    background: rgba(30,24,14,0.95);
    border-color: rgba(139,90,43,0.3);
    color: var(--papyrus-dark, #e0c9a0);
}

/* ─── Day View Go-To Card (papyrus theme) ─── */
.dv-goto-card {
    background: var(--papyrus-card);
    border: 1.5px solid var(--papyrus-border);
    box-shadow: 0 2px 8px rgba(100, 60, 20, 0.08);
    margin-top: 20px;
}
.dv-goto-card .goto-header {
    background: var(--papyrus-section);
    border-bottom-color: var(--papyrus-border);
    color: var(--papyrus-text);
}
.dv-goto-card .goto-radio {
    color: var(--papyrus-text-secondary);
}
.dv-goto-card .goto-radio input[type="radio"] {
    accent-color: var(--papyrus-text-secondary);
}
.dv-goto-card .convert-btn {
    background: linear-gradient(135deg, var(--btn-grad-from), var(--btn-grad-to));
}
[data-theme="dark"] .dv-goto-card {
    background: rgba(30,24,14,0.5);
    border-color: rgba(139,90,43,0.2);
}
[data-theme="dark"] .dv-goto-card .goto-header {
    background: rgba(139,90,43,0.15);
    border-bottom-color: rgba(139,90,43,0.2);
    color: var(--papyrus-dark);
}

/* ─── Day View nav separator ─── */
.dv-nav-separator {
    width: 60%;
    max-width: 300px;
    height: 1px;
    background: var(--papyrus-text-secondary);
    opacity: 0.2;
    margin: 24px auto 8px;
}

/* ─── Credits ─── */
.dv-credits {
    text-align: center;
    padding: 24px 16px 16px;
    opacity: 0.5;
    font-size: 0.75rem;
    line-height: 1.7;
    color: var(--papyrus-text-secondary);
}
[data-theme="dark"] .dv-credits {
    color: var(--text-secondary, #94a3b8);
}
.dv-credits-name {
    font-weight: 600;
    font-size: 0.8rem;
}

/* ─── Share Screen ─── */
.share-view {
    padding: 16px;
    max-width: 480px;
    margin: 0 auto;
}
.share-header {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    margin-bottom: 20px;
}
.share-title {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--text, #e8e0d0);
    margin: 0;
}
.share-close-btn {
    position: absolute;
    left: 0;
    background: none;
    border: none;
    color: var(--text, #e8e0d0);
    font-size: 1.4rem;
    cursor: pointer;
    padding: 4px 10px;
    opacity: 0.7;
    transition: opacity 0.2s;
}
[dir="ltr"] .share-close-btn {
    left: auto;
    right: 0;
}
.share-close-btn:hover {
    opacity: 1;
}

/* Theme cards */
.share-themes {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    padding: 4px 0 12px;
    margin-bottom: 16px;
    -webkit-overflow-scrolling: touch;
}
.share-theme-card {
    flex: 0 0 auto;
    width: 90px;
    padding: 8px 6px;
    border: 2px solid rgba(255,255,255,0.1);
    border-radius: 10px;
    background: rgba(255,255,255,0.03);
    cursor: pointer;
    text-align: center;
    transition: all 0.2s;
}
.share-theme-card.active {
    border-color: var(--gold-500, #d4a340);
    background: rgba(212,163,64,0.1);
}
.share-theme-mini {
    width: 100%;
    height: 48px;
    border-radius: 6px;
    margin-bottom: 6px;
}
.share-theme-label {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text, #e8e0d0);
}

/* Image preview */
.share-preview-container {
    margin-bottom: 20px;
    text-align: center;
}
.share-preview-img {
    max-width: 100%;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}

/* Actions */
.share-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
}
.share-action-btn {
    padding: 12px 32px;
    border: none;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 700;
    font-family: inherit;
    cursor: pointer;
    transition: opacity 0.2s;
}
.share-action-btn:active {
    opacity: 0.8;
}
.share-action-primary {
    background: var(--gold-500, #d4a340);
    color: #1a1a2e;
}
.share-action-secondary {
    background: rgba(255,255,255,0.1);
    color: var(--text, #e8e0d0);
    border: 1px solid rgba(255,255,255,0.15);
}

/* Light mode overrides */
[data-theme="light"] .share-theme-card {
    border-color: rgba(0,0,0,0.1);
    background: rgba(0,0,0,0.02);
}
[data-theme="light"] .share-theme-card.active {
    background: rgba(212,163,64,0.1);
}
[data-theme="light"] .share-action-secondary {
    background: rgba(0,0,0,0.06);
    color: #333;
    border-color: rgba(0,0,0,0.15);
}
[data-theme="light"] .share-close-btn {
    color: #333;
}
[data-theme="light"] .share-title {
    color: #333;
}
[data-theme="light"] .share-theme-label {
    color: #333;
}

/* ═══════════════════════════════════════════════════════════
   لوحات الألوان — Color Palettes
   ═══════════════════════════════════════════════════════════ */

/* ─── الأخضر (emerald) — فاتح ─── */
[data-palette="emerald"] {
    --tex-spot-r: 40; --tex-spot-g: 120; --tex-spot-b: 70;
    --tex-fiber: rgba(30,100,60,0.04);
    --tex-fiber-v: rgba(30,100,60,0.02);
    --tex-grad-top: #d4f0e3;
    --tex-grad-mid1: #c0e6d4;
    --tex-grad-mid2: #b0dcc6;
    --tex-grad-bottom: #a0d2b8;
    --btn-grad-from: #2d7a4f;
    --btn-grad-to: #1a5c38;
    --btn-text: #e8f9f0;
    --header-from: #1a4a30;
    --header-to: #2d7a4f;
    --arc-label: #1a5c38;
    --arc-day: #2d7a4f;
    --arc-sun: #2d7a4f;
    --arc-marker: #1a5c38;
    --arc-label-color: #1a5c38;
    --gold: #2d7a4f;
    --papyrus-bg: #d4f0e3;
    --papyrus-light: #e8f9f0;
    --papyrus-dark: #a0d2b8;
    --papyrus-text: #0d3b2e;
    --papyrus-text-secondary: #1a5c38;
    --papyrus-border: rgba(30,100,60,0.25);
    --papyrus-card: rgba(220,245,232,0.7);
    --papyrus-section: rgba(200,235,218,0.5);
}
/* ─── الأخضر (emerald) — غامق ─── */
[data-theme="dark"][data-palette="emerald"] {
    --tex-spot-r: 20; --tex-spot-g: 70; --tex-spot-b: 40;
    --tex-fiber: rgba(30,100,60,0.05);
    --tex-fiber-v: rgba(30,100,60,0.03);
    --tex-grad-top: #081a10;
    --tex-grad-mid1: #0c2016;
    --tex-grad-mid2: #10261a;
    --tex-grad-bottom: #081a10;
    --btn-grad-from: #1a5c38;
    --btn-grad-to: #0d3b2e;
    --btn-text: #d4f0e3;
    --header-from: #061208;
    --header-to: #0d3b2e;
    --arc-label: #4cc494;
    --arc-day: #4cc494;
    --arc-sun: #4cc494;
    --arc-marker: #4cc494;
    --arc-label-color: #8abfa0;
    --gold: #4cc494;
    --papyrus-bg: #081a10;
    --papyrus-light: #0c2016;
    --papyrus-dark: #061208;
    --papyrus-text: #d4f0e3;
    --papyrus-text-secondary: #8abfa0;
    --papyrus-border: rgba(30,100,60,0.25);
    --papyrus-card: rgba(12,32,22,0.7);
    --papyrus-section: rgba(16,38,26,0.5);
}

/* ─── الأزرق (ocean) — فاتح ─── */
[data-palette="ocean"] {
    --tex-spot-r: 50; --tex-spot-g: 100; --tex-spot-b: 140;
    --tex-fiber: rgba(30,80,120,0.04);
    --tex-fiber-v: rgba(30,80,120,0.02);
    --tex-grad-top: #d0e6f5;
    --tex-grad-mid1: #bdd9ee;
    --tex-grad-mid2: #aacce6;
    --tex-grad-bottom: #98c0de;
    --btn-grad-from: #2a6080;
    --btn-grad-to: #1a4660;
    --btn-text: #e6f2fa;
    --header-from: #1a3a54;
    --header-to: #2a6080;
    --arc-label: #1a4660;
    --arc-day: #2a6080;
    --arc-sun: #2a6080;
    --arc-marker: #1a4660;
    --arc-label-color: #1a4660;
    --gold: #2a6080;
    --papyrus-bg: #d0e6f5;
    --papyrus-light: #e6f2fa;
    --papyrus-dark: #98c0de;
    --papyrus-text: #0d2a40;
    --papyrus-text-secondary: #1a4660;
    --papyrus-border: rgba(30,80,120,0.25);
    --papyrus-card: rgba(215,235,248,0.7);
    --papyrus-section: rgba(195,225,242,0.5);
}
/* ─── الأزرق (ocean) — غامق ─── */
[data-theme="dark"][data-palette="ocean"] {
    --tex-spot-r: 20; --tex-spot-g: 50; --tex-spot-b: 80;
    --tex-fiber: rgba(30,80,120,0.05);
    --tex-fiber-v: rgba(30,80,120,0.03);
    --tex-grad-top: #08141e;
    --tex-grad-mid1: #0c1a26;
    --tex-grad-mid2: #10202e;
    --tex-grad-bottom: #08141e;
    --btn-grad-from: #1a4660;
    --btn-grad-to: #0d2a40;
    --btn-text: #d0e6f5;
    --header-from: #060e16;
    --header-to: #0d2a40;
    --arc-label: #5eb8e8;
    --arc-day: #5eb8e8;
    --arc-sun: #5eb8e8;
    --arc-marker: #5eb8e8;
    --arc-label-color: #80b0d0;
    --gold: #5eb8e8;
    --papyrus-bg: #08141e;
    --papyrus-light: #0c1a26;
    --papyrus-dark: #060e16;
    --papyrus-text: #d0e6f5;
    --papyrus-text-secondary: #80b0d0;
    --papyrus-border: rgba(30,80,120,0.25);
    --papyrus-card: rgba(12,26,38,0.7);
    --papyrus-section: rgba(16,32,46,0.5);
}

/* ─── البنفسجي (amethyst) — فاتح ─── */
[data-palette="amethyst"] {
    --tex-spot-r: 110; --tex-spot-g: 60; --tex-spot-b: 140;
    --tex-fiber: rgba(90,50,120,0.04);
    --tex-fiber-v: rgba(90,50,120,0.02);
    --tex-grad-top: #e8d5f5;
    --tex-grad-mid1: #ddc5ee;
    --tex-grad-mid2: #d2b5e6;
    --tex-grad-bottom: #c6a5de;
    --btn-grad-from: #6b3a8a;
    --btn-grad-to: #4e2868;
    --btn-text: #f3e8fa;
    --header-from: #3a1e5a;
    --header-to: #6b3a8a;
    --arc-label: #4e2868;
    --arc-day: #6b3a8a;
    --arc-sun: #6b3a8a;
    --arc-marker: #4e2868;
    --arc-label-color: #4e2868;
    --gold: #6b3a8a;
    --papyrus-bg: #e8d5f5;
    --papyrus-light: #f3e8fa;
    --papyrus-dark: #c6a5de;
    --papyrus-text: #2a1040;
    --papyrus-text-secondary: #4e2868;
    --papyrus-border: rgba(90,50,120,0.25);
    --papyrus-card: rgba(240,225,250,0.7);
    --papyrus-section: rgba(230,210,245,0.5);
}
/* ─── البنفسجي (amethyst) — غامق ─── */
[data-theme="dark"][data-palette="amethyst"] {
    --tex-spot-r: 60; --tex-spot-g: 30; --tex-spot-b: 80;
    --tex-fiber: rgba(90,50,120,0.05);
    --tex-fiber-v: rgba(90,50,120,0.03);
    --tex-grad-top: #14081e;
    --tex-grad-mid1: #1a0e26;
    --tex-grad-mid2: #20142e;
    --tex-grad-bottom: #14081e;
    --btn-grad-from: #4e2868;
    --btn-grad-to: #3a1e5a;
    --btn-text: #e8d5f5;
    --header-from: #0e0616;
    --header-to: #2a1040;
    --arc-label: #b880e0;
    --arc-day: #b880e0;
    --arc-sun: #b880e0;
    --arc-marker: #b880e0;
    --arc-label-color: #b090c8;
    --gold: #b880e0;
    --papyrus-bg: #14081e;
    --papyrus-light: #1a0e26;
    --papyrus-dark: #0e0616;
    --papyrus-text: #e8d5f5;
    --papyrus-text-secondary: #b090c8;
    --papyrus-border: rgba(90,50,120,0.25);
    --papyrus-card: rgba(26,14,38,0.7);
    --papyrus-section: rgba(32,20,46,0.5);
}

/* ─── الذهبي (gold) — فاتح ─── */
[data-palette="gold"] {
    --tex-spot-r: 170; --tex-spot-g: 130; --tex-spot-b: 30;
    --tex-fiber: rgba(140,110,20,0.04);
    --tex-fiber-v: rgba(140,110,20,0.02);
    --tex-grad-top: #f5e8c0;
    --tex-grad-mid1: #f0deb0;
    --tex-grad-mid2: #ebd4a0;
    --tex-grad-bottom: #e0c890;
    --btn-grad-from: #a07818;
    --btn-grad-to: #7a5a10;
    --btn-text: #fdf8e8;
    --header-from: #5a4010;
    --header-to: #a07818;
    --arc-label: #7a5a10;
    --arc-day: #a07818;
    --arc-sun: #a07818;
    --arc-marker: #7a5a10;
    --arc-label-color: #7a5a10;
    --gold: #a07818;
    --papyrus-bg: #f5e8c0;
    --papyrus-light: #fdf8e8;
    --papyrus-dark: #e0c890;
    --papyrus-text: #3a2a08;
    --papyrus-text-secondary: #6b5020;
    --papyrus-border: rgba(140,110,20,0.25);
    --papyrus-card: rgba(250,242,220,0.7);
    --papyrus-section: rgba(242,232,200,0.5);
}
/* ─── الذهبي (gold) — غامق ─── */
[data-theme="dark"][data-palette="gold"] {
    --tex-spot-r: 90; --tex-spot-g: 70; --tex-spot-b: 15;
    --tex-fiber: rgba(140,110,20,0.05);
    --tex-fiber-v: rgba(140,110,20,0.03);
    --tex-grad-top: #1a1408;
    --tex-grad-mid1: #201a0c;
    --tex-grad-mid2: #262010;
    --tex-grad-bottom: #1a1408;
    --btn-grad-from: #7a5a10;
    --btn-grad-to: #5a4010;
    --btn-text: #f5e8c0;
    --header-from: #121006;
    --header-to: #3a2a08;
    --arc-label: #e6c040;
    --arc-day: #e6c040;
    --arc-sun: #e6c040;
    --arc-marker: #e6c040;
    --arc-label-color: #c0a868;
    --gold: #e6c040;
    --papyrus-bg: #1a1408;
    --papyrus-light: #201a0c;
    --papyrus-dark: #121006;
    --papyrus-text: #f5e8c0;
    --papyrus-text-secondary: #c0a868;
    --papyrus-border: rgba(140,110,20,0.25);
    --papyrus-card: rgba(32,26,12,0.7);
    --papyrus-section: rgba(38,32,16,0.5);
}

/* ─── الأحمر (ruby) — فاتح ─── */
[data-palette="ruby"] {
    --tex-spot-r: 150; --tex-spot-g: 60; --tex-spot-b: 60;
    --tex-fiber: rgba(120,40,40,0.04);
    --tex-fiber-v: rgba(120,40,40,0.02);
    --tex-grad-top: #f5d5d5;
    --tex-grad-mid1: #eec5c5;
    --tex-grad-mid2: #e6b5b5;
    --tex-grad-bottom: #dea5a5;
    --btn-grad-from: #8a3a3a;
    --btn-grad-to: #6a2828;
    --btn-text: #fae8e8;
    --header-from: #4a1e1e;
    --header-to: #8a3a3a;
    --arc-label: #6a2828;
    --arc-day: #8a3a3a;
    --arc-sun: #8a3a3a;
    --arc-marker: #6a2828;
    --arc-label-color: #6a2828;
    --gold: #8a3a3a;
    --papyrus-bg: #f5d5d5;
    --papyrus-light: #fae8e8;
    --papyrus-dark: #dea5a5;
    --papyrus-text: #3a1010;
    --papyrus-text-secondary: #6a2828;
    --papyrus-border: rgba(120,40,40,0.25);
    --papyrus-card: rgba(248,225,225,0.7);
    --papyrus-section: rgba(240,210,210,0.5);
}
/* ─── الأحمر (ruby) — غامق ─── */
[data-theme="dark"][data-palette="ruby"] {
    --tex-spot-r: 80; --tex-spot-g: 30; --tex-spot-b: 30;
    --tex-fiber: rgba(120,40,40,0.05);
    --tex-fiber-v: rgba(120,40,40,0.03);
    --tex-grad-top: #1e0808;
    --tex-grad-mid1: #260e0e;
    --tex-grad-mid2: #2e1414;
    --tex-grad-bottom: #1e0808;
    --btn-grad-from: #6a2828;
    --btn-grad-to: #4a1e1e;
    --btn-text: #f5d5d5;
    --header-from: #160606;
    --header-to: #3a1010;
    --arc-label: #e07070;
    --arc-day: #e07070;
    --arc-sun: #e07070;
    --arc-marker: #e07070;
    --arc-label-color: #c89090;
    --gold: #e07070;
    --papyrus-bg: #1e0808;
    --papyrus-light: #260e0e;
    --papyrus-dark: #160606;
    --papyrus-text: #f5d5d5;
    --papyrus-text-secondary: #c89090;
    --papyrus-border: rgba(120,40,40,0.25);
    --papyrus-card: rgba(38,14,14,0.7);
    --papyrus-section: rgba(46,20,20,0.5);
}

/* ─── الأبيض (snow) — فاتح ─── */
[data-palette="snow"] {
    --tex-spot-r: 200; --tex-spot-g: 200; --tex-spot-b: 200;
    --tex-fiber: rgba(180,180,180,0.03);
    --tex-fiber-v: rgba(180,180,180,0.015);
    --tex-grad-top: #f8f8f8;
    --tex-grad-mid1: #f2f2f2;
    --tex-grad-mid2: #eeeeee;
    --tex-grad-bottom: #e8e8e8;
    --btn-grad-from: #444444;
    --btn-grad-to: #2a2a2a;
    --btn-text: #f5f5f5;
    --header-from: #333333;
    --header-to: #555555;
    --arc-label: #444444;
    --arc-day: #555555;
    --arc-sun: #555555;
    --arc-marker: #444444;
    --arc-label-color: #444444;
    --gold: #555555;
    --papyrus-bg: #f8f8f8;
    --papyrus-light: #ffffff;
    --papyrus-dark: #e0e0e0;
    --papyrus-text: #1a1a1a;
    --papyrus-text-secondary: #555555;
    --papyrus-border: rgba(0,0,0,0.12);
    --papyrus-card: rgba(255,255,255,0.8);
    --papyrus-section: rgba(245,245,245,0.6);
}
/* ─── الأبيض (snow) — غامق ─── */
[data-theme="dark"][data-palette="snow"] {
    --tex-spot-r: 50; --tex-spot-g: 50; --tex-spot-b: 50;
    --tex-fiber: rgba(100,100,100,0.04);
    --tex-fiber-v: rgba(100,100,100,0.02);
    --tex-grad-top: #1a1a1a;
    --tex-grad-mid1: #1e1e1e;
    --tex-grad-mid2: #222222;
    --tex-grad-bottom: #1a1a1a;
    --btn-grad-from: #555555;
    --btn-grad-to: #3a3a3a;
    --btn-text: #f0f0f0;
    --header-from: #111111;
    --header-to: #2a2a2a;
    --arc-label: #b0b0b0;
    --arc-day: #b0b0b0;
    --arc-sun: #b0b0b0;
    --arc-marker: #b0b0b0;
    --arc-label-color: #909090;
    --gold: #b0b0b0;
    --papyrus-bg: #1a1a1a;
    --papyrus-light: #222222;
    --papyrus-dark: #111111;
    --papyrus-text: #e8e8e8;
    --papyrus-text-secondary: #909090;
    --papyrus-border: rgba(255,255,255,0.1);
    --papyrus-card: rgba(30,30,30,0.8);
    --papyrus-section: rgba(35,35,35,0.6);
}

/* ─── الأسود (noir) — فاتح ─── */
[data-palette="noir"] {
    --tex-spot-r: 80; --tex-spot-g: 80; --tex-spot-b: 80;
    --tex-fiber: rgba(60,60,60,0.04);
    --tex-fiber-v: rgba(60,60,60,0.02);
    --tex-grad-top: #d8d8d8;
    --tex-grad-mid1: #cccccc;
    --tex-grad-mid2: #c0c0c0;
    --tex-grad-bottom: #b8b8b8;
    --btn-grad-from: #222222;
    --btn-grad-to: #111111;
    --btn-text: #f0f0f0;
    --header-from: #1a1a1a;
    --header-to: #333333;
    --arc-label: #333333;
    --arc-day: #333333;
    --arc-sun: #333333;
    --arc-marker: #222222;
    --arc-label-color: #333333;
    --gold: #333333;
    --papyrus-bg: #d8d8d8;
    --papyrus-light: #e8e8e8;
    --papyrus-dark: #b0b0b0;
    --papyrus-text: #111111;
    --papyrus-text-secondary: #444444;
    --papyrus-border: rgba(0,0,0,0.15);
    --papyrus-card: rgba(230,230,230,0.7);
    --papyrus-section: rgba(215,215,215,0.5);
}
/* ─── الأسود (noir) — غامق ─── */
[data-theme="dark"][data-palette="noir"] {
    --tex-spot-r: 30; --tex-spot-g: 30; --tex-spot-b: 30;
    --tex-fiber: rgba(80,80,80,0.04);
    --tex-fiber-v: rgba(80,80,80,0.02);
    --tex-grad-top: #0a0a0a;
    --tex-grad-mid1: #0e0e0e;
    --tex-grad-mid2: #121212;
    --tex-grad-bottom: #0a0a0a;
    --btn-grad-from: #3a3a3a;
    --btn-grad-to: #222222;
    --btn-text: #e0e0e0;
    --header-from: #050505;
    --header-to: #1a1a1a;
    --arc-label: #a0a0a0;
    --arc-day: #a0a0a0;
    --arc-sun: #a0a0a0;
    --arc-marker: #a0a0a0;
    --arc-label-color: #808080;
    --gold: #a0a0a0;
    --papyrus-bg: #0a0a0a;
    --papyrus-light: #121212;
    --papyrus-dark: #050505;
    --papyrus-text: #d8d8d8;
    --papyrus-text-secondary: #808080;
    --papyrus-border: rgba(255,255,255,0.08);
    --papyrus-card: rgba(18,18,18,0.8);
    --papyrus-section: rgba(22,22,22,0.6);
}

/* ═══════════════════════════════════════════════════════════
   Palette Popup
   ═══════════════════════════════════════════════════════════ */
.dv-palette-btn {
    display: inline-block;
    margin-top: 20px;
    padding: 10px 28px;
    background: var(--btn-grad-from);
    color: var(--btn-text);
    border: none;
    border-radius: var(--radius-xl);
    font-size: 0.95rem;
    font-weight: 700;
    font-family: inherit;
    cursor: pointer;
    transition: opacity 0.2s;
}
.dv-palette-btn:active {
    opacity: 0.8;
}
.palette-popup {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--papyrus-card);
    border-top: 2px solid var(--papyrus-border);
    border-radius: 20px 20px 0 0;
    padding: 20px 16px 28px;
    z-index: 1000;
    box-shadow: 0 -4px 24px rgba(0,0,0,0.15);
    transform: translateY(100%);
    transition: transform 0.3s ease;
}
.palette-popup.open {
    transform: translateY(0);
}
[data-theme="dark"] .palette-popup {
    background: rgba(30,24,14,0.95);
    box-shadow: 0 -4px 24px rgba(0,0,0,0.5);
}
.palette-popup-title {
    text-align: center;
    font-size: 1rem;
    font-weight: 700;
    color: var(--papyrus-text);
    margin-bottom: 16px;
}
.palette-swatches {
    display: flex;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
}
.palette-swatch {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    border: 3px solid transparent;
    cursor: pointer;
    position: relative;
    transition: transform 0.2s, border-color 0.2s;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}
.palette-swatch:active {
    transform: scale(0.9);
}
.palette-swatch.active {
    border-color: var(--papyrus-text);
    transform: scale(1.1);
}
.palette-swatch.active::after {
    content: '✓';
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.1rem;
    font-weight: 900;
    text-shadow: 0 1px 3px rgba(0,0,0,0.5);
}
.palette-swatch-label {
    font-size: 0.65rem;
    text-align: center;
    color: var(--papyrus-text-secondary);
    margin-top: 4px;
}
.palette-item {
    display: flex;
    flex-direction: column;
    align-items: center;
}
/* ═══════════════════════════════════════════════════════ */
/* ═══ Onboarding Overlay ═══ */
/* ═══════════════════════════════════════════════════════ */
.onboarding-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 1;
    transition: opacity 0.4s;
}
.onboarding-overlay.hidden {
    opacity: 0;
    pointer-events: none;
}
.onboarding-card {
    background: var(--papyrus-card);
    border-radius: 20px;
    padding: 40px 32px;
    text-align: center;
    max-width: 340px;
    width: 90%;
    box-shadow: 0 8px 32px rgba(0,0,0,0.2);
}
[data-theme="dark"] .onboarding-card {
    background: #1e293b;
    box-shadow: 0 8px 32px rgba(0,0,0,0.5);
}
.onboarding-icon {
    font-size: 3rem;
    margin-bottom: 12px;
}
.onboarding-title {
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--papyrus-text);
    margin: 0 0 8px;
}
[data-theme="dark"] .onboarding-title { color: var(--text-primary); }
.onboarding-msg {
    font-size: 0.95rem;
    color: var(--papyrus-text-secondary);
    line-height: 1.6;
    margin: 0 0 24px;
}
[data-theme="dark"] .onboarding-msg { color: var(--text-secondary); }
.onboarding-btn {
    display: block;
    width: 100%;
    padding: 14px;
    background: var(--gold-600);
    color: #fff;
    border: none;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 700;
    font-family: inherit;
    cursor: pointer;
    transition: background 0.2s;
}
.onboarding-btn:hover { background: var(--gold-500); }
.onboarding-btn:disabled { opacity: 0.6; cursor: wait; }
.onboarding-skip {
    display: inline-block;
    margin-top: 16px;
    font-size: 0.85rem;
    color: var(--papyrus-text-secondary);
    cursor: pointer;
    text-decoration: underline;
}
[data-theme="dark"] .onboarding-skip { color: var(--text-secondary); }

.palette-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.3);
    z-index: 999;
    opacity: 0;
    transition: opacity 0.3s;
    pointer-events: none;
}
.palette-overlay.open {
    opacity: 1;
    pointer-events: auto;
}

/* ═══════════════════════════════════════════════════════ */
/* ═══ Clickable Anwa Cards ═══ */
/* ═══════════════════════════════════════════════════════ */
.dv-anwa-clickable {
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s;
    position: relative;
}
.dv-anwa-clickable:active {
    transform: scale(0.95);
}
.dv-anwa-clickable::after {
    content: '←';
    display: block;
    font-size: 0.55rem;
    color: var(--papyrus-text-secondary, #a09080);
    margin-top: 2px;
    opacity: 0.5;
}
[dir="ltr"] .dv-anwa-clickable::after { content: '→'; }
.durur-more-btn.dv-anwa-clickable::after { display: none; }
.anwa-clickable {
    cursor: pointer;
    transition: background 0.15s;
}
.anwa-clickable:active {
    background: var(--papyrus-section, rgba(139,90,43,0.08));
}

/* ═══════════════════════════════════════════════════════ */
/* ═══ Anwa Detail View ═══ */
/* ═══════════════════════════════════════════════════════ */
.anwa-detail-view {
    padding: 16px;
    max-width: 480px;
    margin: 0 auto;
    min-height: 100vh;
    background:
        radial-gradient(ellipse 80px 60px at 15% 20%, rgba(var(--tex-spot-r),var(--tex-spot-g),var(--tex-spot-b),0.12) 0%, transparent 70%),
        radial-gradient(ellipse 100px 70px at 75% 15%, rgba(var(--tex-spot-r),var(--tex-spot-g),var(--tex-spot-b),0.08) 0%, transparent 70%),
        linear-gradient(180deg, var(--tex-grad-top) 0%, var(--tex-grad-mid1) 30%, var(--tex-grad-mid2) 60%, var(--tex-grad-bottom) 100%);
}

.anwa-detail-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
    padding: 12px 0;
    border-bottom: 2px solid var(--papyrus-border, rgba(139,90,43,0.25));
    position: sticky;
    top: 0;
    z-index: 10;
    background: inherit;
}

.anwa-detail-back-btn {
    background: linear-gradient(135deg, var(--btn-grad-from), var(--btn-grad-to));
    color: var(--btn-text);
    border: none;
    border-radius: 20px;
    padding: 6px 18px;
    font-family: var(--font-arabic);
    font-size: 0.85rem;
    cursor: pointer;
    flex-shrink: 0;
}

.anwa-detail-title {
    font-family: var(--font-display, var(--font-arabic));
    font-size: 1.15rem;
    font-weight: 700;
    color: var(--papyrus-text, #4a3520);
    margin: 0;
}
[data-theme="dark"] .anwa-detail-title { color: var(--text-primary, #f5edd8); }

.anwa-detail-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.anwa-detail-item {
    background: var(--papyrus-card, rgba(255,248,235,0.6));
    border: 1px solid var(--papyrus-border, rgba(139,90,43,0.25));
    border-radius: 12px;
    padding: 12px 14px;
}
[data-theme="dark"] .anwa-detail-item {
    background: rgba(255,255,255,0.05);
    border-color: rgba(255,255,255,0.1);
}

.anwa-detail-item.current {
    border-color: var(--gold, #d4a017);
    border-width: 2px;
    background: rgba(212, 160, 23, 0.08);
    box-shadow: 0 0 12px rgba(212, 160, 23, 0.15);
}
[data-theme="dark"] .anwa-detail-item.current {
    background: rgba(212, 160, 23, 0.12);
    border-color: var(--gold, #d4a017);
}

.anwa-detail-item-compact { padding: 8px 14px; }

.anwa-detail-item-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 4px;
}

.anwa-detail-item-num {
    min-width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--papyrus-border, rgba(139,90,43,0.25));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.72rem;
    font-weight: 700;
    color: var(--papyrus-text, #4a3520);
    flex-shrink: 0;
}
[data-theme="dark"] .anwa-detail-item-num {
    background: rgba(255,255,255,0.1);
    color: var(--text-primary, #f5edd8);
}
.anwa-detail-item.current .anwa-detail-item-num {
    background: var(--gold, #d4a017);
    color: #fff;
}

.anwa-detail-item-name {
    font-family: var(--font-display, var(--font-arabic));
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--papyrus-text, #4a3520);
}
[data-theme="dark"] .anwa-detail-item-name { color: var(--text-primary, #f5edd8); }

.anwa-detail-badge {
    margin-inline-start: auto;
    background: var(--gold, #d4a017);
    color: #fff;
    font-size: 0.68rem;
    padding: 2px 10px;
    border-radius: 10px;
    font-weight: 600;
    white-space: nowrap;
}
.anwa-badge-off {
    background: var(--papyrus-border, rgba(139,90,43,0.25));
    color: var(--papyrus-text-secondary, #a09080);
}
[data-theme="dark"] .anwa-badge-off {
    background: rgba(255,255,255,0.1);
    color: rgba(255,255,255,0.5);
}

.anwa-detail-item-dates {
    font-size: 0.78rem;
    color: var(--papyrus-text-secondary, #a09080);
    margin-bottom: 2px;
}

.anwa-detail-item-weather {
    font-size: 0.8rem;
    line-height: 1.7;
    color: var(--papyrus-text-secondary, #a09080);
    border-top: 1px solid var(--papyrus-border, rgba(139,90,43,0.15));
    padding-top: 6px;
    margin-top: 4px;
}

.anwa-detail-item-related {
    font-size: 0.78rem;
    color: var(--papyrus-text-secondary, #a09080);
    margin-top: 4px;
}

/* ── Climate Statistics Bar (80-year data) ── */
.climate-bar {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-top: 8px;
    padding-top: 6px;
    border-top: 1px dashed var(--papyrus-border, rgba(139,90,43,0.15));
    align-items: center;
}
.climate-pill {
    display: inline-flex;
    align-items: center;
    gap: 2px;
    font-size: 0.7rem;
    padding: 2px 7px;
    border-radius: 10px;
    background: rgba(139,90,43,0.08);
    color: var(--papyrus-text-secondary, #a09080);
    white-space: nowrap;
}
[data-theme="dark"] .climate-pill {
    background: rgba(255,255,255,0.07);
    color: rgba(255,255,255,0.55);
}
.climate-note {
    font-size: 0.58rem;
    color: var(--papyrus-text-secondary, #a09080);
    opacity: 0.5;
    margin-inline-start: auto;
}
.match-badge {
    display: inline-block;
    font-size: 0.65rem;
    font-weight: 700;
    padding: 1px 8px;
    border-radius: 10px;
}
.match-high { background: rgba(76,175,80,0.15); color: #2e7d32; }
.match-mid  { background: rgba(212,160,23,0.15); color: #a88620; }
.match-low  { background: rgba(239,108,0,0.15); color: #bf360c; }
[data-theme="dark"] .match-high { background: rgba(76,175,80,0.2); color: #81c784; }
[data-theme="dark"] .match-mid  { background: rgba(212,160,23,0.2); color: #ffd54f; }
[data-theme="dark"] .match-low  { background: rgba(239,108,0,0.2); color: #ffab91; }
.anwa-detail-durr-stats {
    font-size: 0.62rem;
    color: var(--papyrus-text-secondary, #a09080);
    margin-top: 3px;
    display: flex;
    align-items: center;
    gap: 4px;
}
.match-badge-sm {
    font-size: 0.55rem;
    font-weight: 700;
    padding: 0 5px;
    border-radius: 8px;
}
.climate-wind-stat {
    font-size: 0.72rem;
    color: var(--papyrus-text-secondary, #a09080);
    margin-top: 4px;
    opacity: 0.85;
}

/* ── بطاقة الأنماط الأرشيفية ── */
.archive-card {
    margin: 16px 0;
    padding: 16px;
    background: var(--papyrus-card, rgba(255,248,235,0.6));
    border: 1px solid var(--papyrus-border, rgba(139,90,43,0.25));
    border-radius: 14px;
}
.archive-card-title {
    font-size: 1rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 4px;
    color: var(--papyrus-text, #3e2a14);
}
.archive-card-subtitle {
    font-size: 0.65rem;
    text-align: center;
    color: var(--papyrus-text-secondary, #a09080);
    margin-bottom: 14px;
    opacity: 0.7;
}
.archive-row {
    padding: 10px 0;
    border-bottom: 1px solid rgba(139,90,43,0.1);
}
.archive-row:last-child { border-bottom: none; }
.archive-row-label {
    font-size: 0.78rem;
    font-weight: 700;
    color: var(--papyrus-text, #3e2a14);
    margin-bottom: 2px;
}
.archive-row-detail {
    font-size: 0.72rem;
    color: var(--papyrus-text-secondary, #a09080);
    margin-bottom: 6px;
}
.archive-row-sub .archive-row-label {
    font-weight: 600;
    font-size: 0.72rem;
}
.archive-row-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    align-items: center;
}
.archive-row-stats > span {
    font-size: 0.68rem;
    padding: 2px 7px;
    border-radius: 10px;
    background: rgba(139,90,43,0.06);
    color: var(--papyrus-text-secondary, #a09080);
    white-space: nowrap;
}
[data-theme="dark"] .archive-card {
    background: rgba(30,24,14,0.5);
    border-color: rgba(139,90,43,0.2);
}
[data-theme="dark"] .archive-card-title { color: var(--text-primary, #f5e6c8); }
[data-theme="dark"] .archive-card-subtitle { color: var(--text-secondary, rgba(255,255,255,0.5)); }
[data-theme="dark"] .archive-row { border-bottom-color: rgba(255,255,255,0.06); }
[data-theme="dark"] .archive-row-label { color: var(--text-primary, #f5e6c8); }
[data-theme="dark"] .archive-row-detail { color: var(--text-secondary, rgba(255,255,255,0.5)); }
[data-theme="dark"] .archive-row-stats > span {
    background: rgba(255,255,255,0.07);
    color: rgba(255,255,255,0.55);
}

/* ── Durr System ── */
.anwa-detail-suhail {
    text-align: center;
    padding: 16px;
    background: var(--papyrus-card, rgba(255,248,235,0.6));
    border-radius: 12px;
    border: 1px solid var(--papyrus-border, rgba(139,90,43,0.25));
    margin-bottom: 12px;
}
[data-theme="dark"] .anwa-detail-suhail {
    background: rgba(255,255,255,0.05);
    border-color: rgba(255,255,255,0.1);
}
.anwa-detail-suhail-label {
    font-size: 0.85rem;
    color: var(--papyrus-text-secondary, #a09080);
}
.anwa-detail-suhail-value {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--gold, #d4a017);
    display: block;
    line-height: 1.2;
}
.anwa-detail-suhail-sub {
    font-size: 0.8rem;
    color: var(--papyrus-text-secondary, #a09080);
    margin-top: 4px;
}

.anwa-detail-mia {
    margin-bottom: 12px;
    background: var(--papyrus-card, rgba(255,248,235,0.6));
    border-radius: 12px;
    border: 1px solid var(--papyrus-border, rgba(139,90,43,0.25));
    overflow: hidden;
}
[data-theme="dark"] .anwa-detail-mia {
    background: rgba(255,255,255,0.05);
    border-color: rgba(255,255,255,0.1);
}
.anwa-detail-mia.current-mia {
    border-color: var(--gold, #d4a017);
    border-width: 2px;
}

.anwa-detail-mia-header {
    background: linear-gradient(135deg, var(--header-from, #f5edd8), var(--header-to, #e8d9b8));
    color: var(--papyrus-text, #4a3520);
    padding: 10px 16px;
    font-family: var(--font-display, var(--font-arabic));
    font-weight: 700;
    font-size: 0.9rem;
}
[data-theme="dark"] .anwa-detail-mia-header {
    color: var(--btn-text, #f5edd8);
}

.anwa-detail-durr-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 4px;
    padding: 8px;
}

.anwa-detail-durr {
    padding: 8px;
    text-align: center;
    border-radius: 8px;
    font-size: 0.82rem;
    color: var(--papyrus-text, #4a3520);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
}
[data-theme="dark"] .anwa-detail-durr { color: var(--text-primary, #f5edd8); }
.anwa-detail-durr.current {
    background: rgba(212, 160, 23, 0.15);
    font-weight: 700;
    border: 1.5px solid var(--gold, #d4a017);
}

.anwa-detail-durr-name { font-weight: 600; }

/* ── Wind Compass ── */
.anwa-detail-compass {
    margin: 12px auto;
    max-width: 300px;
}
.wind-compass-svg {
    width: 100%;
    height: auto;
}

.anwa-detail-section-title {
    font-family: var(--font-display, var(--font-arabic));
    font-weight: 700;
    font-size: 1rem;
    color: var(--papyrus-text, #4a3520);
    margin: 16px 0 8px;
}
[data-theme="dark"] .anwa-detail-section-title { color: var(--text-primary, #f5edd8); }

/* ─── عنوان ديرة الدرور ─── */
.anwa-detail-header.dirat-duror-header {
    position: relative;
}
.anwa-detail-header.dirat-duror-header .anwa-detail-title {
    font-size: 1.55rem;
    position: absolute;
    left: 0;
    right: 0;
    text-align: center;
    pointer-events: none;
}
.anwa-detail-header.dirat-duror-header .anwa-detail-title .info-help-btn {
    pointer-events: auto;
}
.anwa-detail-header.dirat-duror-header .anwa-detail-back-btn {
    z-index: 1;
}

/* ─── ديرة الدرور (Dirat al-Duror) ─── */

.durur-more-btn {
    display: block;
    width: 100%;
    margin-top: 10px;
    padding: 12px 16px;
    border: 2px solid var(--gold, #c49440);
    border-radius: 12px;
    background: linear-gradient(135deg, rgba(196,148,64,0.1), rgba(196,148,64,0.05));
    color: var(--gold, #c49440);
    font-size: 1.15rem;
    font-weight: 700;
    font-family: var(--font-arabic);
    text-align: center;
    cursor: pointer;
    transition: transform 0.15s, background 0.15s, box-shadow 0.15s;
}
.durur-more-btn:active {
    transform: scale(0.97);
}
.durur-more-btn:hover {
    background: linear-gradient(135deg, rgba(196,148,64,0.18), rgba(196,148,64,0.08));
    box-shadow: 0 2px 8px rgba(196,148,64,0.2);
}
[data-theme="dark"] .durur-more-btn {
    border-color: rgba(196,148,64,0.5);
    background: linear-gradient(135deg, rgba(196,148,64,0.15), rgba(196,148,64,0.05));
    color: #e8c170;
}

.anwa-detail-view:has(.durur-circle-container) {
    max-width: 800px;
}
.durur-circle-container {
    width: 100%;
    max-width: 760px;
    margin: 0 auto;
    padding: 8px 0;
    position: relative;
}
.durur-circle-svg {
    width: 100%;
    height: auto;
    display: block;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
}
.durur-circle-svg text {
    pointer-events: none;
    user-select: none;
    font-family: var(--font-arabic, 'Calibri', sans-serif);
}
/* ═══ Draggable Needle ═══ */
.needle-drag-handle { cursor: grab; }
.needle-dragging .needle-drag-handle { cursor: grabbing; }
.needle-dragging .durur-segment { pointer-events: none !important; }
.durur-circle-svg.needle-dragging { touch-action: none; }
.needle-tooltip {
    position: absolute;
    background: rgba(100, 110, 125, 0.92);
    color: #fff;
    padding: 3px 10px;
    border-radius: 8px;
    font-size: 0.8rem;
    font-weight: bold;
    white-space: nowrap;
    pointer-events: none;
    transform: translateX(-50%);
    z-index: 10;
    font-family: var(--font-arabic, 'Calibri', sans-serif);
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    border: 1px solid rgba(200, 210, 220, 0.3);
}
[data-theme="dark"] .needle-tooltip {
    background: rgba(60, 65, 75, 0.94);
    border-color: rgba(150, 160, 175, 0.25);
}
[data-theme="dark"] .durur-circle-svg text.durur-text {
    fill: var(--text-primary, #f5edd8);
}

.durur-segment {
    cursor: pointer;
    transition: filter 0.15s, opacity 0.15s;
}
.durur-segment:hover {
    filter: brightness(1.15);
}
.durur-segment-active {
    filter: brightness(1.3) !important;
    stroke: var(--gold, #c49440) !important;
    stroke-width: 4 !important;
}

.today-needle {
    pointer-events: none;
}

/* Info panel */
.durur-info-panel {
    margin: 12px 0;
    padding: 14px 16px;
    border-radius: 12px;
    background: var(--papyrus-card, #faf4e8);
    border: 1px solid var(--papyrus-border, #d4c8a0);
    font-size: 0.85rem;
    line-height: 1.7;
    color: var(--papyrus-text, #3a2f20);
    text-align: center;
}
[data-theme="dark"] .durur-info-panel {
    background: rgba(30,24,14,0.6);
    border-color: rgba(139,90,43,0.2);
    color: var(--text-primary, #f5edd8);
}
.durur-info-dates {
    font-size: 0.78rem;
    color: var(--papyrus-text-secondary, #8a7e6a);
}
[data-theme="dark"] .durur-info-dates {
    color: var(--text-secondary, #b0a890);
}
.durur-info-desc {
    font-size: 0.8rem;
    color: var(--papyrus-text-secondary, #8a7e6a);
    display: block;
    margin-top: 4px;
}
[data-theme="dark"] .durur-info-desc {
    color: var(--text-secondary, #b0a890);
}

/* Fish / Crops / Wildlife lists below circle */
.durur-list-section {
    margin: 16px 0 8px;
}
.durur-list-title {
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--papyrus-text, #3a2f20);
    margin-bottom: 8px;
    padding-bottom: 4px;
    border-bottom: 1px solid var(--papyrus-border, #d4c8a0);
}
[data-theme="dark"] .durur-list-title {
    color: var(--text-primary, #f5edd8);
    border-bottom-color: rgba(255,255,255,0.06);
}
.durur-list-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}
.durur-list-tag {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 16px;
    font-size: 0.75rem;
    background: rgba(0,0,0,0.04);
    color: var(--papyrus-text-secondary, #8a7e6a);
    border: 1px solid var(--papyrus-border, #d4c8a0);
}
.durur-list-tag.in-season {
    background: rgba(196,148,64,0.15);
    color: var(--gold, #9a7a20);
    border-color: var(--gold, #c49440);
    font-weight: 700;
}
[data-theme="dark"] .durur-list-tag {
    background: rgba(255,255,255,0.05);
    color: var(--text-secondary, #b0a890);
    border-color: rgba(139,90,43,0.2);
}
[data-theme="dark"] .durur-list-tag.in-season {
    background: rgba(196,148,64,0.2);
    color: #e8c170;
    border-color: rgba(196,148,64,0.5);
}

.durur-source {
    margin-top: 20px;
    padding: 10px;
    font-size: 0.72rem;
    color: var(--papyrus-text-secondary, #8a7e6a);
    text-align: center;
    border-top: 1px solid var(--papyrus-border, #d4c8a0);
}
[data-theme="dark"] .durur-source {
    color: var(--text-secondary, #b0a890);
    border-top-color: rgba(255,255,255,0.06);
}

/* ─── بطاقات الإثراء (كتاب الدرور والطوالع) ─── */
.durur-enrich-section {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 20px;
    padding-top: 16px;
    border-top: 1px solid var(--papyrus-border, #d4c8a0);
}
.durur-enrich-section:empty {
    display: none;
}
[data-theme="dark"] .durur-enrich-section {
    border-top-color: rgba(255,255,255,0.08);
}

.dv-enrich-card {
    display: flex;
    gap: 12px;
    padding: 14px 16px;
    border-radius: 14px;
    background: var(--papyrus-card, rgba(255,248,235,0.7));
    border: 1px solid var(--papyrus-border, rgba(139,90,43,0.2));
    transition: transform 0.15s, box-shadow 0.15s;
}
.dv-enrich-card:active {
    transform: scale(0.985);
}
[data-theme="dark"] .dv-enrich-card {
    background: rgba(255,255,255,0.04);
    border-color: rgba(255,255,255,0.08);
}

.dv-enrich-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 10px;
    background: rgba(212,160,23,0.1);
}
[data-theme="dark"] .dv-enrich-icon {
    background: rgba(212,160,23,0.15);
}

.dv-enrich-body {
    flex: 1;
    min-width: 0;
}

.dv-enrich-title {
    font-family: var(--font-display, var(--font-arabic));
    font-weight: 700;
    font-size: 0.92rem;
    color: var(--papyrus-text, #4a3520);
    margin-bottom: 6px;
    line-height: 1.4;
}
[data-theme="dark"] .dv-enrich-title {
    color: var(--text-primary, #f5edd8);
}

.dv-enrich-desc {
    font-size: 0.82rem;
    line-height: 1.75;
    color: var(--papyrus-text-secondary, #7a6e5a);
}
[data-theme="dark"] .dv-enrich-desc {
    color: var(--text-secondary, #b0a890);
}

/* ── المثل ── */
.dv-enrich-quote {
    font-family: var(--font-display, var(--font-arabic));
    font-size: 1rem;
    font-weight: 600;
    color: var(--gold, #c49440);
    line-height: 1.8;
    margin: 4px 0;
    padding: 8px 14px;
    border-radius: 10px;
    background: rgba(212,160,23,0.06);
    border-inline-start: 3px solid var(--gold, #c49440);
}
[data-theme="dark"] .dv-enrich-quote {
    color: #e8c170;
    background: rgba(212,160,23,0.1);
}

.dv-enrich-quote-sub {
    font-size: 0.78rem;
    color: var(--papyrus-text-secondary, #7a6e5a);
    font-style: italic;
    margin-top: 4px;
    padding-inline-start: 14px;
}
[data-theme="dark"] .dv-enrich-quote-sub {
    color: var(--text-secondary, #b0a890);
}

/* ── المواسم ── */
.dv-enrich-season-item {
    font-size: 0.82rem;
    line-height: 1.7;
    color: var(--papyrus-text-secondary, #7a6e5a);
    padding: 4px 0;
    border-bottom: 1px solid rgba(139,90,43,0.08);
}
.dv-enrich-season-item:last-child {
    border-bottom: none;
}
[data-theme="dark"] .dv-enrich-season-item {
    color: var(--text-secondary, #b0a890);
    border-bottom-color: rgba(255,255,255,0.05);
}

.dv-enrich-season-icon {
    margin-inline-end: 4px;
}

/* ── الأحداث الفلكية ── */
.dv-enrich-astro-item {
    font-size: 0.82rem;
    line-height: 1.7;
    color: var(--papyrus-text, #4a3520);
    padding: 6px 0;
    border-bottom: 1px solid rgba(139,90,43,0.08);
}
.dv-enrich-astro-item:last-child {
    border-bottom: none;
}
[data-theme="dark"] .dv-enrich-astro-item {
    color: var(--text-primary, #f5edd8);
    border-bottom-color: rgba(255,255,255,0.05);
}

.dv-enrich-astro-desc {
    font-size: 0.78rem;
    color: var(--papyrus-text-secondary, #7a6e5a);
}
[data-theme="dark"] .dv-enrich-astro-desc {
    color: var(--text-secondary, #b0a890);
}

/* ── هجرة الطيور ── */
.dv-enrich-bird-item {
    font-size: 0.82rem;
    line-height: 1.7;
    color: var(--papyrus-text-secondary, #7a6e5a);
    padding: 4px 0;
    border-bottom: 1px solid rgba(139,90,43,0.08);
}
.dv-enrich-bird-item:last-child {
    border-bottom: none;
}
[data-theme="dark"] .dv-enrich-bird-item {
    color: var(--text-secondary, #b0a890);
    border-bottom-color: rgba(255,255,255,0.05);
}

/* ── ألوان البطاقات المختلفة ── */
.dv-enrich-durr .dv-enrich-icon { background: rgba(196,148,64,0.12); }
.dv-enrich-seasons .dv-enrich-icon { background: rgba(76,175,80,0.12); }
.dv-enrich-proverb .dv-enrich-icon { background: rgba(255,152,0,0.12); }
.dv-enrich-astro .dv-enrich-icon { background: rgba(63,81,181,0.12); }
.dv-enrich-birds .dv-enrich-icon { background: rgba(0,150,136,0.12); }
.dv-enrich-thuraya .dv-enrich-icon { background: rgba(156,39,176,0.12); }

[data-theme="dark"] .dv-enrich-durr .dv-enrich-icon { background: rgba(196,148,64,0.2); }
[data-theme="dark"] .dv-enrich-seasons .dv-enrich-icon { background: rgba(76,175,80,0.2); }
[data-theme="dark"] .dv-enrich-proverb .dv-enrich-icon { background: rgba(255,152,0,0.2); }
[data-theme="dark"] .dv-enrich-astro .dv-enrich-icon { background: rgba(63,81,181,0.2); }
[data-theme="dark"] .dv-enrich-birds .dv-enrich-icon { background: rgba(0,150,136,0.2); }
[data-theme="dark"] .dv-enrich-thuraya .dv-enrich-icon { background: rgba(156,39,176,0.2); }
