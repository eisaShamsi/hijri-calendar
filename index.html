<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#14553f">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>التقويم الهجري</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon-192.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="icon-192.svg">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">

    <!-- ═══ الرأس ═══ -->
    <header class="header">
        <span class="header-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="1em" height="1em" fill="currentColor"><defs><mask id="hm"><rect width="100" height="100" fill="white"/><circle cx="62" cy="45" r="38" fill="black"/></mask></defs><circle cx="50" cy="50" r="45" mask="url(#hm)"/></svg></span>
        <h1 id="app-title">التقويم الهجري</h1>
    </header>

    <!-- ═══ بطاقة اليوم ═══ -->
    <div class="today-card">
        <div class="date-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="1em" height="1em" fill="currentColor"><defs><mask id="dm"><rect width="100" height="100" fill="white"/><circle cx="62" cy="45" r="38" fill="black"/></mask></defs><circle cx="50" cy="50" r="45" mask="url(#dm)"/></svg></div>
        <div class="date-text">
            <div class="hijri-date" id="today-hijri"></div>
            <div class="greg-date" id="today-gregorian"></div>
            <div class="anwa-date" id="today-anwa"></div>
        </div>
        <span class="mode-badge mode-astro" id="mode-badge">فلكي</span>
    </div>

    <!-- ═══ شريط الأدوات ═══ -->
    <div class="toolbar-card">
        <div class="toolbar-row">
            <!-- اختيار النمط -->
            <div class="tool-group">
                <label class="tool-label" id="lbl-mode"></label>
                <select id="mode-select" class="mode-select">
                    <option value="astronomical" id="opt-astro"></option>
                    <option value="tabular" id="opt-tab"></option>
                </select>
            </div>

            <!-- بداية الأسبوع -->
            <div class="tool-group">
                <label class="tool-label" id="lbl-weekstart"></label>
                <select id="weekstart-select" class="mode-select">
                    <option value="0" id="opt-sat"></option>
                    <option value="1" id="opt-sun"></option>
                    <option value="2" id="opt-mon"></option>
                </select>
            </div>

            <!-- اللغة -->
            <div class="tool-group">
                <label class="tool-label" id="lbl-lang"></label>
                <select id="lang-select" class="mode-select">
                    <option value="ar" id="opt-lang-ar"></option>
                    <option value="en" id="opt-lang-en"></option>
                </select>
            </div>

            <!-- التصحيح اليدوي -->
            <div class="tool-group">
                <label class="tool-label" id="lbl-corr"></label>
                <div class="corr-controls">
                    <button class="corr-btn" id="corr-minus">−</button>
                    <span class="corr-value" id="corr-value">٠</span>
                    <button class="corr-btn" id="corr-plus">+</button>
                    <button class="corr-btn corr-reset-btn" id="corr-reset"></button>
                </div>
            </div>

            <!-- الوضع الداكن -->
            <div class="tool-group theme-toggle-group">
                <label class="tool-label" id="lbl-theme"></label>
                <button class="theme-toggle-btn" id="theme-toggle" title="">&#x1F319;</button>
            </div>
        </div>

        <!-- قائمة التصحيحات -->
        <div class="corrections-row">
            <span class="corrections-label" id="lbl-corrections"></span>
            <span id="corrections-list"></span>
            <button class="corr-btn corr-clear-btn" id="corr-clear-all"></button>
        </div>
    </div>

    <!-- ═══ الانتقال إلى تاريخ ═══ -->
    <div class="goto-card">
        <div class="goto-header" id="goto-title"></div>
        <div class="goto-body">
            <div class="goto-toggle">
                <label class="goto-radio">
                    <input type="radio" name="goto-type" value="hijri" checked>
                    <span id="goto-hijri-label"></span>
                </label>
                <label class="goto-radio">
                    <input type="radio" name="goto-type" value="gregorian">
                    <span id="goto-greg-label"></span>
                </label>
            </div>
            <div class="input-row">
                <div class="input-group">
                    <label id="goto-lbl-day"></label>
                    <input type="number" id="goto-day" min="1" max="30">
                </div>
                <div class="input-group">
                    <label id="goto-lbl-month"></label>
                    <input type="number" id="goto-month" min="1" max="12">
                </div>
                <div class="input-group">
                    <label id="goto-lbl-year"></label>
                    <input type="number" id="goto-year">
                </div>
                <button class="convert-btn" id="goto-btn"></button>
            </div>
        </div>
    </div>

    <!-- ═══ بطاقة التقويم ═══ -->
    <div class="calendar-card">

        <!-- شريط التنقل -->
        <div class="nav-bar">
            <button class="nav-btn nav-next" id="next-month"></button>
            <div class="month-info">
                <div>
                    <span class="month-title" id="month-title"></span>
                    <span class="leap-badge" id="leap-badge"></span>
                </div>
                <div class="gregorian-range" id="gregorian-range"></div>
            </div>
            <button class="nav-btn nav-prev" id="prev-month"></button>
            <button class="today-nav-btn" id="today-btn"></button>
        </div>

        <!-- رؤوس الأيام -->
        <div class="day-headers" id="day-headers"></div>

        <!-- شبكة التقويم -->
        <div class="calendar-grid" id="calendar-grid"></div>

        <!-- شريط المعلومات -->
        <div class="info-bar" id="selected-info"></div>

    </div>

    <!-- ═══ مواقيت الصلاة ═══ -->
    <div class="prayer-card" id="prayer-card">
        <div class="prayer-header">
            <span class="prayer-icon">&#x1F54C;</span>
            <span id="prayer-title">مواقيت الصلاة</span>
        </div>
        <div class="prayer-no-location" id="prayer-no-location">
            <span id="prayer-no-loc-text">حدد موقعك لعرض مواقيت الصلاة</span>
            <button class="convert-btn prayer-detect-btn" id="prayer-detect-main">
                <span id="prayer-detect-main-text">تحديد الموقع</span>
            </button>
        </div>
        <div class="prayer-grid" id="prayer-grid" style="display:none">
            <div class="prayer-item">
                <span class="prayer-name" id="p-fajr-lbl">الفجر</span>
                <span class="prayer-time" id="p-fajr">--:--</span>
            </div>
            <div class="prayer-item">
                <span class="prayer-name" id="p-sunrise-lbl">الشروق</span>
                <span class="prayer-time" id="p-sunrise">--:--</span>
            </div>
            <div class="prayer-item">
                <span class="prayer-name" id="p-dhuhr-lbl">الظهر</span>
                <span class="prayer-time" id="p-dhuhr">--:--</span>
            </div>
            <div class="prayer-item">
                <span class="prayer-name" id="p-asr-lbl">العصر</span>
                <span class="prayer-time" id="p-asr">--:--</span>
            </div>
            <div class="prayer-item">
                <span class="prayer-name" id="p-maghrib-lbl">المغرب</span>
                <span class="prayer-time" id="p-maghrib">--:--</span>
            </div>
            <div class="prayer-item">
                <span class="prayer-name" id="p-isha-lbl">العشاء</span>
                <span class="prayer-time" id="p-isha">--:--</span>
            </div>
        </div>
        <div class="prayer-date-indicator" id="prayer-date-indicator" style="display:none"></div>
        <div class="prayer-countdown" id="prayer-countdown" style="display:none">
            <span id="prayer-next-label">التالي</span>:
            <strong id="prayer-next-name"></strong>
            <span id="prayer-next-in">بعد</span>
            <span id="prayer-next-time"></span>
        </div>
        <div class="prayer-method-info" id="prayer-method-info" style="display:none">
            <span id="prayer-method-name"></span>
        </div>
        <div class="prayer-settings-toggle">
            <button class="prayer-settings-btn" id="prayer-settings-toggle">
                &#x2699; <span id="prayer-settings-lbl">إعدادات مواقيت الصلاة</span>
            </button>
        </div>
        <div class="prayer-settings" id="prayer-settings" style="display:none">
            <div class="prayer-settings-row">
                <div class="tool-group">
                    <label class="tool-label" id="lbl-prayer-method">طريقة الحساب</label>
                    <select id="prayer-method-select" class="mode-select"></select>
                </div>
                <div class="tool-group">
                    <label class="tool-label" id="lbl-prayer-asr">العصر</label>
                    <select id="prayer-asr-select" class="mode-select">
                        <option value="1" id="opt-shafii"></option>
                        <option value="2" id="opt-hanafi"></option>
                    </select>
                </div>
            </div>
            <div class="prayer-settings-row">
                <div class="input-group">
                    <label id="lbl-prayer-lat">خط العرض</label>
                    <input type="number" id="prayer-lat" step="0.01">
                </div>
                <div class="input-group">
                    <label id="lbl-prayer-lng">خط الطول</label>
                    <input type="number" id="prayer-lng" step="0.01">
                </div>
                <div class="input-group">
                    <label id="lbl-prayer-tz">المنطقة الزمنية</label>
                    <input type="number" id="prayer-tz" step="0.5">
                </div>
                <button class="convert-btn prayer-detect-btn" id="prayer-detect">&#x1F4CD;</button>
            </div>
            <div class="prayer-settings-row">
                <div class="tool-group">
                    <label class="tool-label" id="lbl-prayer-highlat">خطوط العرض العالية</label>
                    <select id="prayer-highlat-select" class="mode-select"></select>
                </div>
                <div class="input-group">
                    <label id="lbl-prayer-elevation">الارتفاع (م)</label>
                    <input type="number" id="prayer-elevation" step="1" value="0">
                </div>
            </div>
            <!-- إعدادات الإشعارات -->
            <div class="prayer-settings-row notify-row">
                <div class="tool-group">
                    <label class="tool-label" id="lbl-notify">
                        <input type="checkbox" id="notify-toggle">
                        <span id="notify-enable-lbl">تفعيل الإشعارات</span>
                    </label>
                    <span class="notify-status" id="notify-status"></span>
                </div>
                <div class="input-group">
                    <label id="lbl-notify-before">قبل الصلاة بـ</label>
                    <select id="notify-before" class="mode-select">
                        <option value="0">0</option>
                        <option value="5" selected>5</option>
                        <option value="10">10</option>
                        <option value="15">15</option>
                        <option value="30">30</option>
                    </select>
                </div>
            </div>
        </div>
        <!-- الجدول الشهري -->
        <div class="prayer-timetable-toggle">
            <button class="prayer-settings-btn" id="timetable-toggle">
                &#x1F4C5; <span id="timetable-lbl">الجدول الشهري</span>
            </button>
        </div>
        <div class="timetable-container" id="timetable-container" style="display:none">
            <div class="timetable-header">
                <button class="convert-btn timetable-csv-btn" id="timetable-csv">&#x1F4E5; <span id="timetable-csv-lbl">CSV</span></button>
            </div>
            <div class="timetable-body" id="timetable-body"></div>
        </div>
    </div>

    <!-- ═══ بطاقة الأنواء والمواسم ═══ -->
    <div class="anwa-card" id="anwa-card">
        <div class="anwa-header">
            <span class="anwa-icon">☆</span>
            <span id="anwa-card-title">الأنواء والمواسم</span>
        </div>
        <div class="anwa-grid" id="anwa-grid">
            <div class="anwa-item">
                <span class="anwa-label" id="anwa-tale3-lbl">الطالع</span>
                <span class="anwa-value" id="anwa-tale3">—</span>
            </div>
            <div class="anwa-item">
                <span class="anwa-label" id="anwa-zodiac-lbl">البرج</span>
                <span class="anwa-value" id="anwa-zodiac">—</span>
            </div>
            <div class="anwa-item">
                <span class="anwa-label" id="anwa-season-lbl">الموسم</span>
                <span class="anwa-value" id="anwa-season">—</span>
            </div>
            <div class="anwa-item">
                <span class="anwa-label" id="anwa-durr-lbl">الدّر</span>
                <span class="anwa-value" id="anwa-durr">—</span>
            </div>
            <div class="anwa-item">
                <span class="anwa-label" id="anwa-suhail-lbl">سهيل</span>
                <span class="anwa-value" id="anwa-suhail">—</span>
            </div>
            <div class="anwa-item">
                <span class="anwa-label" id="anwa-mia-lbl">المائة</span>
                <span class="anwa-value" id="anwa-mia">—</span>
            </div>
        </div>
        <div class="anwa-weather" id="anwa-weather"></div>
    </div>

    <!-- ═══ تصدير iCal ═══ -->
    <div class="goto-card">
        <div class="goto-header" id="export-title"></div>
        <div class="goto-body">
            <div class="goto-toggle">
                <label class="goto-radio">
                    <input type="radio" name="export-type" value="hijri" checked>
                    <span id="export-hijri-label"></span>
                </label>
                <label class="goto-radio">
                    <input type="radio" name="export-type" value="gregorian">
                    <span id="export-greg-label"></span>
                </label>
            </div>
            <div class="export-row">
                <div class="export-range">
                    <span class="export-label" id="export-from-label"></span>
                    <div class="export-fields">
                        <div class="input-group">
                            <label id="export-from-month-lbl"></label>
                            <input type="number" id="export-from-month" min="1" max="12" value="1">
                        </div>
                        <div class="input-group">
                            <label id="export-from-year-lbl"></label>
                            <input type="number" id="export-from-year" value="1447">
                        </div>
                    </div>
                </div>
                <div class="export-range">
                    <span class="export-label" id="export-to-label"></span>
                    <div class="export-fields">
                        <div class="input-group">
                            <label id="export-to-month-lbl"></label>
                            <input type="number" id="export-to-month" min="1" max="12" value="12">
                        </div>
                        <div class="input-group">
                            <label id="export-to-year-lbl"></label>
                            <input type="number" id="export-to-year" value="1447">
                        </div>
                    </div>
                </div>
                <button class="convert-btn export-btn" id="export-btn"></button>
            </div>
        </div>
    </div>

    <!-- ═══ عن المنهج ═══ -->
    <div class="about-card" id="about-card">
        <h3 id="about-title"></h3>
        <p id="about-p1"></p>
        <p id="about-p2"></p>
        <p id="about-p3"></p>
        <p id="about-p4"></p>
    </div>

    <!-- ═══ التذييل ═══ -->
    <footer class="site-footer">
        <div id="footer-credit"></div>
        <div class="footer-version" id="footer-version"></div>
        <div class="footer-tool" id="footer-tool"></div>
        <button class="convert-btn install-btn" id="install-btn" style="display:none">
            &#x1F4F2; <span id="install-btn-text">تثبيت التطبيق</span>
        </button>
    </footer>

</div>

<script src="capacitor.js"></script>
<script src="hijri.js"></script>
<script src="prayer-times.js"></script>
<script src="app.js"></script>

</body>
</html>
